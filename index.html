<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0F172A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Rogue Portfolio | DQ Dashboard &#8212; February 2026 MTD</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #0F172A 100%);
            font-family: 'DM Sans', -apple-system, sans-serif;
            color: #F8FAFC;
            padding: 20px 24px;
            font-size: 11px;
            line-height: 1.5;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.15);
            animation: fadeInUp 0.6s ease-out;
        }
        .header-title-row { display: flex; align-items: center; gap: 12px; }
        .porchpass-logo { height: 30px; width: auto; flex-shrink: 0; }
        .porchpass-logo .logo-icon { fill: #4075FF; }
        .porchpass-logo .logo-text { fill: #E2E8F0; }
        .header-title {
            font-size: 26px; font-weight: 800; margin: 0;
            background: linear-gradient(135deg, #F59E0B 0%, #EF4444 50%, #F59E0B 100%);
            background-size: 200% auto;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; animation: shimmer 3s linear infinite;
        }
        .header-badge {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            padding: 4px 10px; border-radius: 12px; font-size: 9px; font-weight: 700;
            color: #FFF; box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }
        .header-subtitle { margin: 4px 0 0 0; font-size: 11px; color: #94A3B8; letter-spacing: 0.3px; }
        .header-right { text-align: right; font-size: 10px; color: #64748B; }
        .header-right strong { color: #F8FAFC; }

        /* Period Toggle */
        .period-toggle {
            display: flex; justify-content: center; gap: 6px; margin-bottom: 16px;
            animation: fadeInUp 0.6s ease-out 0.05s both;
        }
        .period-btn {
            padding: 6px 18px; border-radius: 8px; font-size: 10px; font-weight: 700;
            cursor: pointer; border: 1px solid rgba(148, 163, 184, 0.2);
            background: rgba(15, 23, 42, 0.6); color: #94A3B8;
            transition: all 0.3s ease; font-family: 'DM Sans', sans-serif;
        }
        .period-btn.active {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.05));
            border-color: rgba(245, 158, 11, 0.5); color: #F59E0B;
            box-shadow: 0 0 12px rgba(245, 158, 11, 0.15);
        }
        .period-btn.disabled {
            opacity: 0.4; cursor: not-allowed;
        }

        /* KPI Strip */
        .kpi-strip {
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;
            margin-bottom: 16px; animation: fadeInUp 0.6s ease-out 0.1s both;
            overflow: visible;
        }
        .kpi-card {
            text-align: center; padding: 12px 10px;
            background: rgba(15, 23, 42, 0.6); border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: default; position: relative; overflow: visible;
        }
        .kpi-card:hover { z-index: 200; }
        .kpi-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.5), transparent);
            opacity: 0; transition: opacity 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-4px); border-color: rgba(245, 158, 11, 0.3);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }
        .kpi-card:hover::before { opacity: 1; }
        .kpi-label {
            font-size: 8px; color: #94A3B8; text-transform: uppercase;
            letter-spacing: 0.8px; margin-bottom: 4px; font-weight: 600;
        }
        .kpi-value { font-size: 22px; font-weight: 800; color: #F8FAFC; line-height: 1.2; }
        .kpi-sub { font-size: 9px; color: #64748B; margin-top: 2px; }
        .kpi-sub.positive { color: #10B981; }
        .kpi-sub.negative { color: #EF4444; }
        .kpi-sub.warn { color: #F59E0B; }
        .kpi-change { font-size: 8px; margin-top: 3px; font-weight: 600; }
        .kpi-change.up { color: #EF4444; }
        .kpi-change.down { color: #10B981; }

        .kpi-card.has-tooltip::after {
            content: '\2139'; position: absolute; top: 6px; right: 6px;
            font-size: 10px; color: rgba(148, 163, 184, 0.4);
        }
        .kpi-card.has-tooltip:hover::after { color: rgba(245, 158, 11, 0.7); }
        .kpi-card.has-tooltip .kpi-tooltip {
            display: none; position: absolute; bottom: calc(100% + 10px);
            left: 50%; transform: translateX(-50%);
            background: #1E293B; border: 1px solid #475569; color: #CBD5E1;
            padding: 10px 14px; border-radius: 8px; font-size: 9px;
            white-space: nowrap; z-index: 9999; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            text-align: left; font-weight: 400; pointer-events: none;
        }
        .kpi-card.has-tooltip:hover .kpi-tooltip { display: block; }

        /* Grid Rows */
        .grid-row-1 {
            display: grid; grid-template-columns: 1.5fr 1fr 1fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.2s both;
        }
        .grid-row-2 {
            display: grid; grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.3s both;
        }
        .grid-row-3 {
            display: grid; grid-template-columns: 1.5fr 1fr 1fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.4s both;
        }
        .grid-row-4 {
            display: grid; grid-template-columns: 1fr 1fr 1.5fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.5s both;
        }

        /* Card Styles */
        .card {
            background: rgba(30, 41, 59, 0.6); border-radius: 14px; padding: 14px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); backdrop-filter: blur(8px);
        }
        .card:hover {
            border-color: rgba(148, 163, 184, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); transform: translateY(-2px);
        }
        .card.watch {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.02));
            border: 1px solid rgba(239, 68, 68, 0.25);
        }
        .card.strength {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.02));
            border: 1px solid rgba(16, 185, 129, 0.25);
        }
        .card.highlight {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(245, 158, 11, 0.02));
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        .card.premium {
            background: linear-gradient(135deg, rgba(167, 139, 250, 0.08), rgba(167, 139, 250, 0.02));
            border: 1px solid rgba(167, 139, 250, 0.2);
        }

        /* Section Header */
        .section-header { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
        .section-header-icon { font-size: 14px; }
        .section-header-title {
            font-size: 11px; font-weight: 700; color: #F8FAFC;
            text-transform: uppercase; letter-spacing: 0.8px;
        }

        /* Charts */
        .chart-140 { height: 140px; width: 100%; position: relative; }
        .chart-110 { height: 110px; width: 100%; position: relative; }
        .chart-130 { height: 130px; width: 100%; position: relative; }
        .chart-legend {
            display: flex; justify-content: center; gap: 18px;
            margin-top: 6px; font-size: 9px; color: #94A3B8;
        }
        .chart-legend-small {
            font-size: 8px; color: #94A3B8; margin-top: 6px; text-align: center;
        }

        /* DPD Legend */
        .dpd-legend {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;
            font-size: 8px; margin-top: 6px;
        }
        .dpd-item { display: flex; align-items: center; gap: 4px; color: #94A3B8; }
        .dpd-dot { width: 8px; height: 8px; border-radius: 3px; }

        /* Tables */
        .tier-table { width: 100%; font-size: 9px; border-collapse: collapse; }
        .tier-table th {
            text-align: left; padding: 6px 8px; color: #94A3B8;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            font-weight: 600; font-size: 8px; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .tier-table td {
            padding: 6px 8px; color: #F8FAFC;
            border-bottom: 1px solid rgba(148, 163, 184, 0.08);
        }
        .tier-table tr:hover td { background: rgba(255, 255, 255, 0.05); transition: background 0.15s ease; }
        .tier-table tbody tr:nth-child(even) td { background: rgba(255, 255, 255, 0.015); }
        .tier-table tbody tr:nth-child(even):hover td { background: rgba(255, 255, 255, 0.06); }
        .tier-table tr:last-child td { border-bottom: none; }
        .tier-table .highlight-cell { color: #10B981; font-weight: 700; }
        .tier-table .warning-cell { color: #F59E0B; font-weight: 700; }
        .tier-table .danger-cell { color: #EF4444; font-weight: 700; }

        /* Tooltip headers */
        .th-tooltip { position: relative; cursor: help; }
        .th-tooltip::after {
            content: ' \2139'; font-size: 9px; color: rgba(148, 163, 184, 0.5);
        }
        .th-tooltip:hover::after { color: rgba(245, 158, 11, 0.8); }
        .th-tooltip .th-tooltip-content {
            display: none; position: absolute; bottom: calc(100% + 8px); right: 0;
            background: #1E293B; border: 1px solid #475569; color: #CBD5E1;
            padding: 12px 16px; border-radius: 8px; font-size: 9px; white-space: nowrap;
            z-index: 9999; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            text-align: left; font-weight: 400; text-transform: none; letter-spacing: normal;
            line-height: 1.7;
        }
        .th-tooltip:hover .th-tooltip-content { display: block; }
        .th-tooltip-content strong { color: #F8FAFC; font-weight: 600; }

        /* Metric Grid */
        .metric-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .metric-item {
            background: rgba(15, 23, 42, 0.6); padding: 10px; border-radius: 8px;
            transition: all 0.2s ease; cursor: default;
        }
        .metric-item:hover { background: rgba(15, 23, 42, 0.9); transform: scale(1.02); }
        .metric-label { font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.3px; line-height: 1.3; }
        .metric-value { font-size: 16px; font-weight: 800; color: #F8FAFC; margin-top: 2px; }

        /* Callout Box */
        .callout {
            font-size: 8px; color: #64748B; margin-top: 8px; padding: 6px 8px;
            background: rgba(15, 23, 42, 0.4); border-radius: 6px;
            border-left: 3px solid; transition: all 0.2s ease;
        }
        .callout:hover { background: rgba(15, 23, 42, 0.6); }
        .callout.info { border-left-color: #60A5FA; }
        .callout.warning { border-left-color: #F59E0B; }
        .callout.danger { border-left-color: #EF4444; }
        .callout.success { border-left-color: #10B981; }

        /* Insight Lists */
        .insight-list { display: flex; flex-direction: column; gap: 8px; font-size: 9px; }
        .insight-item {
            display: flex; gap: 8px; padding: 4px 6px; border-radius: 6px;
            transition: all 0.2s ease;
        }
        .insight-item:hover { background: rgba(255, 255, 255, 0.03); transform: translateX(4px); }
        .insight-item span { color: #94A3B8; }
        .insight-item strong { color: #F8FAFC; }

        /* Key Takeaways */
        .key-takeaways { display: flex; flex-direction: column; gap: 8px; }
        .takeaway-item {
            display: flex; align-items: flex-start; gap: 8px; padding: 8px 10px;
            background: rgba(15, 23, 42, 0.5); border-radius: 8px; font-size: 9px;
            transition: all 0.2s ease;
        }
        .takeaway-item:hover { background: rgba(15, 23, 42, 0.8); transform: translateX(4px); }
        .takeaway-icon { font-size: 14px; flex-shrink: 0; }
        .takeaway-content strong { color: #F8FAFC; display: block; margin-bottom: 2px; }
        .takeaway-content span { color: #94A3B8; }

        /* Exec Summary */
        .exec-summary { font-size: 9px; color: #94A3B8; line-height: 1.6; }
        .exec-summary p { margin: 0 0 8px 0; }
        .exec-summary p:last-child { margin: 0; }
        .exec-summary strong { color: #F8FAFC; }
        .exec-summary .hl-green { color: #10B981; font-weight: 700; }
        .exec-summary .hl-amber { color: #F59E0B; font-weight: 700; }
        .exec-summary .hl-red { color: #EF4444; font-weight: 700; }

        /* Section Divider */
        .section-divider {
            text-align: center; margin: 20px 0 16px 0; font-size: 10px;
            font-weight: 700; color: #64748B; text-transform: uppercase;
            letter-spacing: 3px; position: relative;
        }
        .section-divider::before, .section-divider::after {
            content: ''; display: inline-block; width: 100px; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.3), transparent);
            vertical-align: middle; margin: 0 16px;
        }

        /* Section Sub-Navigation */
        .section-nav {
            display: flex; justify-content: center; gap: 4px;
            margin: 0 0 16px 0; padding: 5px;
            background: rgba(15, 23, 42, 0.7); border-radius: 14px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            position: sticky; top: 8px; z-index: 50;
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 0.6s ease-out 0.12s both;
        }
        .section-nav-btn {
            padding: 7px 16px; border-radius: 10px; font-size: 9px; font-weight: 700;
            cursor: pointer; border: none; background: transparent; color: #64748B;
            font-family: 'DM Sans', sans-serif; transition: all 0.25s ease;
            letter-spacing: 0.2px; white-space: nowrap;
        }
        .section-nav-btn:hover { color: #CBD5E1; background: rgba(148, 163, 184, 0.08); }
        .section-nav-btn.active {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.08));
            color: #F59E0B; box-shadow: 0 0 12px rgba(245, 158, 11, 0.1);
        }
        .section-nav-btn .nav-count {
            display: inline-block; margin-left: 5px; padding: 1px 6px;
            background: rgba(148, 163, 184, 0.15); border-radius: 6px;
            font-size: 7px; font-weight: 600; color: #94A3B8; vertical-align: middle;
        }
        .section-nav-btn.active .nav-count {
            background: rgba(245, 158, 11, 0.2); color: #F59E0B;
        }

        /* Section Wrappers */
        .feb-section {
            transition: opacity 0.35s ease, transform 0.35s ease;
            opacity: 1; transform: translateY(0);
        }
        .feb-section.section-hidden {
            display: none !important;
        }
        .feb-section.section-entering {
            animation: sectionFadeIn 0.4s ease-out both;
        }
        @keyframes sectionFadeIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scroll to Top */
        .scroll-top-btn {
            position: fixed; bottom: 24px; right: 24px; width: 40px; height: 40px;
            border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.2);
            background: rgba(30, 41, 59, 0.9); color: #F59E0B;
            font-size: 16px; cursor: pointer; z-index: 200;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease; font-family: 'DM Sans', sans-serif;
        }
        .scroll-top-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.2);
            border-color: rgba(245, 158, 11, 0.4);
        }
        .scroll-top-btn.visible { display: flex; }

        @media print {
            .section-nav { display: none !important; }
            .scroll-top-btn { display: none !important; }
            .feb-section.section-hidden { display: block !important; opacity: 1 !important; }
        }

        /* New Grid Rows for Advanced Intelligence */
        .grid-row-5 {
            display: grid; grid-template-columns: 1fr 1fr 1fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.55s both;
        }
        .grid-row-6 {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.6s both;
        }
        .stat-highlight {
            display: flex; align-items: center; gap: 12px;
            padding: 10px 14px; border-radius: 10px;
            background: rgba(15, 23, 42, 0.5);
            transition: all 0.2s ease;
        }
        .stat-highlight:hover { background: rgba(15, 23, 42, 0.8); transform: translateX(4px); }
        .stat-big { font-size: 26px; font-weight: 800; line-height: 1; }
        .stat-desc { font-size: 9px; color: #94A3B8; line-height: 1.4; }
        .stat-desc strong { color: #F8FAFC; }
        .roll-row {
            display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 2fr;
            gap: 0; font-size: 9px; padding: 5px 0;
            border-bottom: 1px solid rgba(148, 163, 184, 0.06);
            transition: all 0.15s ease;
        }
        .roll-row:hover { background: rgba(255,255,255,0.02); }
        .roll-header { color: #64748B; font-weight: 700; font-size: 7px; text-transform: uppercase; letter-spacing: 0.5px; }
        .roll-bucket { color: #F8FAFC; font-weight: 600; }
        .roll-val { text-align: center; color: #94A3B8; }
        .roll-change { text-align: center; font-weight: 700; }
        .roll-signal { text-align: right; font-size: 8px; }
        .severity-row {
            display: grid; grid-template-columns: 0.5fr 1fr 1fr 1fr 1fr;
            gap: 0; font-size: 9px; padding: 5px 0;
            border-bottom: 1px solid rgba(148, 163, 184, 0.06);
            transition: all 0.15s ease;
        }
        .severity-row:hover { background: rgba(255,255,255,0.02); }

        @media (max-width: 1200px) {
            .grid-row-5 { grid-template-columns: 1fr 1fr; }
            .grid-row-6 { grid-template-columns: 1fr; }
            .risk-map-grid { grid-template-columns: 1fr !important; }
        }
        @media (max-width: 768px) {
            .grid-row-5, .grid-row-6 { grid-template-columns: 1fr !important; }
        }

        /* Footer */
        .footer {
            margin-top: 16px; padding-top: 12px;
            border-top: 1px solid rgba(148, 163, 184, 0.1);
            display: flex; justify-content: space-between; font-size: 9px; color: #64748B;
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }
        .footer strong { color: #94A3B8; }

        /* Responsive */
        @media (max-width: 1200px) {
            .kpi-strip { grid-template-columns: repeat(4, 1fr); }
            .grid-row-1, .grid-row-2, .grid-row-3, .grid-row-4 { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 768px) {
            .kpi-strip { grid-template-columns: repeat(2, 1fr) !important; }
            .grid-row-1, .grid-row-2, .grid-row-3, .grid-row-4 { grid-template-columns: 1fr !important; }
            .header { flex-direction: column; align-items: flex-start; gap: 10px; }
            body { padding: 12px 16px; }
            .section-nav { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25); }
        }

        /* ============================================================ */
        /* MOBILE-FIRST OPTIMIZATION — PHONES ONLY (≤480px)            */
        /* All rules scoped to mobile; zero desktop regression risk     */
        /* ============================================================ */
        @media (max-width: 480px) {
            /* --- Phase 1: Shell & Safe Area --- */
            body {
                padding: 12px env(safe-area-inset-right, 12px) 12px env(safe-area-inset-left, 12px) !important;
                padding-top: max(12px, env(safe-area-inset-top)) !important;
                padding-bottom: max(12px, env(safe-area-inset-bottom)) !important;
                -webkit-text-size-adjust: 100%;
                -webkit-tap-highlight-color: rgba(96, 165, 250, 0.15);
            }

            /* --- Phase 2: Typography Scaling --- */
            .callout { font-size: 11px !important; padding: 10px 12px !important; line-height: 1.5 !important; }
            .callout strong { font-size: 11px !important; }
            .tier-table { font-size: 11px !important; }
            .tier-table th { font-size: 9px !important; padding: 8px 6px !important; }
            .tier-table td { padding: 8px 6px !important; font-size: 11px !important; }
            .section-divider { font-size: 12px !important; margin: 12px 0 !important; }
            .dpd-legend { font-size: 10px !important; }
            .dpd-item { font-size: 10px !important; }
            .kpi-sparkline-label { font-size: 9px !important; }
            .footer { font-size: 10px !important; flex-direction: column !important; gap: 6px !important; text-align: center !important; }
            .footer strong { font-size: 10px !important; }

            /* --- Phase 3: Header — Condensed Mobile Layout --- */
            .header {
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 10px !important;
                padding: 14px 16px !important;
            }
            .header-title { font-size: 18px !important; }
            .header-badge { font-size: 9px !important; padding: 3px 10px !important; }
            .header-subtitle { font-size: 10px !important; line-height: 1.4 !important; }
            .header-right {
                font-size: 10px !important;
                text-align: left !important;
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 4px 12px !important;
            }
            .header-actions {
                width: 100% !important;
                display: flex !important;
                gap: 8px !important;
                margin-top: 4px !important;
            }
            .header-action-btn, .theme-toggle-btn {
                min-height: 44px !important;
                font-size: 13px !important;
                padding: 8px 14px !important;
                flex: 1 !important;
            }

            /* --- Phase 4: Period Toggle — Full-Width Mobile --- */
            .period-toggle-row {
                flex-direction: column !important;
                padding: 8px 12px !important;
                gap: 8px !important;
            }
            .period-toggle {
                width: 100% !important;
                display: flex !important;
            }
            .period-btn {
                flex: 1 !important;
                min-height: 44px !important;
                font-size: 12px !important;
                padding: 10px 8px !important;
            }
            .compare-link-btn {
                position: static !important;
                width: 100% !important;
                min-height: 44px !important;
                font-size: 12px !important;
                text-align: center !important;
            }

            /* --- Phase 5: KPI Strip — 2-Column Grid --- */
            .kpi-strip {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
            }
            .kpi-card {
                padding: 12px 10px !important;
                min-height: 80px !important;
            }
            .kpi-label { font-size: 10px !important; margin-bottom: 4px !important; }
            .kpi-value { font-size: 22px !important; }
            .kpi-sub { font-size: 10px !important; }
            .kpi-change { font-size: 10px !important; }
            .kpi-sparkline-wrap { display: none !important; }

            /* --- Phase 6: Section Nav — Horizontal Scroll --- */
            .section-nav {
                justify-content: flex-start !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                scrollbar-width: none !important;
                gap: 6px !important;
                padding: 6px 8px !important;
                margin: 0 -12px 14px -12px !important;
                border-radius: 0 !important;
                top: 0 !important;
            }
            .section-nav::-webkit-scrollbar { display: none; }
            .section-nav-btn {
                white-space: nowrap !important;
                min-height: 40px !important;
                font-size: 11px !important;
                padding: 8px 14px !important;
                flex-shrink: 0 !important;
            }
            .section-nav-btn .nav-count {
                font-size: 9px !important;
                padding: 1px 6px !important;
            }

            /* --- Phase 7: Content Cards — Increased Padding & Readability --- */
            .card {
                padding: 14px !important;
                border-radius: 12px !important;
                margin-bottom: 0 !important;
            }
            .section-header { margin-bottom: 10px !important; }
            .section-header-icon { font-size: 14px !important; }
            .section-header-title { font-size: 13px !important; }

            /* --- Phase 8: Grid Layouts — Stack All to Single Column --- */
            .grid-row-1, .grid-row-2, .grid-row-3, .grid-row-4,
            .grid-row-5, .grid-row-6 {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }
            .risk-map-grid {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }
            .metric-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
            }
            .metric-item { padding: 8px !important; }
            .metric-label { font-size: 9px !important; }
            .metric-value { font-size: 18px !important; }

            /* --- Phase 9: Tables — Horizontal Scroll with Fade --- */
            .card > table.tier-table,
            .card > div > table.tier-table {
                display: block !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                white-space: nowrap !important;
                scrollbar-width: thin !important;
            }

            /* --- Phase 10: Inline Grid Overrides (with !important) --- */
            .mobile-stat-grid-4 {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
            }
            .mobile-stat-grid-2 {
                grid-template-columns: 1fr !important;
                gap: 8px !important;
            }
            .mobile-loan-row {
                grid-template-columns: 1fr !important;
                gap: 2px !important;
                padding: 8px 0 !important;
            }
            .mobile-loan-row > div {
                display: flex !important;
                justify-content: space-between !important;
            }

            /* --- Phase 11: Compare Mode — Responsive Grid --- */
            .compare-kpi-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
            }
            .compare-kpi-label { font-size: 9px !important; }
            .compare-val { font-size: 16px !important; min-width: 40px !important; }
            .compare-delta { font-size: 10px !important; }
            .compare-charts-grid {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }
            .compare-bucket-row {
                grid-template-columns: 1fr !important;
                gap: 2px !important;
                padding: 8px !important;
                font-size: 10px !important;
            }
            .compare-bucket-row.header-row { display: none !important; }
            .compare-bucket-row .compare-bar { height: 10px !important; }
            .compare-summary-card .headline { font-size: 13px !important; }
            .compare-summary-card .detail { font-size: 11px !important; }

            /* --- Phase 12: Charts — Taller on Mobile for Readability --- */
            .chart-140 { height: 180px !important; }
            .chart-130 { height: 170px !important; }
            .chart-110 { height: 150px !important; }
            .compare-chart-wrap { height: 180px !important; }

            /* --- Stat Highlights — Mobile Readable --- */
            .stat-highlight { padding: 10px 12px !important; }
            .stat-big { font-size: 20px !important; }
            .stat-desc { font-size: 11px !important; line-height: 1.5 !important; }

            /* --- Touch Targets & Feedback --- */
            button, [onclick], .kpi-card, .section-nav-btn, .period-btn, .compare-link-btn {
                -webkit-tap-highlight-color: rgba(96, 165, 250, 0.15);
            }
            button:active, .section-nav-btn:active, .period-btn:active,
            .compare-link-btn:active, .header-action-btn:active {
                transform: scale(0.97) !important;
                opacity: 0.85 !important;
                transition: transform 0.1s ease, opacity 0.1s ease !important;
            }

            /* --- Expanded Table Modal — Full Screen on Mobile --- */
            .expanded-overlay {
                padding: 8px !important;
            }
            .expanded-overlay .card {
                max-height: 90vh !important;
                border-radius: 12px !important;
            }
            .expanded-detail-wrap {
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }

            /* --- DPD Legend Wrap --- */
            .dpd-legend {
                flex-wrap: wrap !important;
                gap: 6px 10px !important;
                justify-content: flex-start !important;
            }

            /* --- Insight Items --- */
            .insight-item { font-size: 11px !important; line-height: 1.5 !important; }
            .insight-item span:first-child { font-size: 14px !important; }

            /* --- Key Portfolio Insights narrative blocks --- */
            .board-narrative [style*="font-size: 9px"],
            .board-narrative [style*="font-size: 8px"] {
                font-size: 11px !important;
                line-height: 1.5 !important;
            }

            /* --- Tooltips — Disable hover tooltips on touch --- */
            .kpi-card.has-tooltip .kpi-tooltip { display: none !important; }
            .th-tooltip-content { display: none !important; }
            #sparkFloat { display: none !important; }

            /* --- Watch/Strength Cards --- */
            .watch-item, .strength-item {
                font-size: 11px !important;
                line-height: 1.5 !important;
            }

            /* --- Cure Cascade Flow --- */
            .cure-flow-item { font-size: 10px !important; }
        }

        /* iPhone SE / tiny screens (≤375px) */
        @media (max-width: 375px) {
            body { padding: 8px !important; }
            .header-title { font-size: 16px !important; }
            .kpi-value { font-size: 20px !important; }
            .card { padding: 12px !important; }
            .tier-table th { font-size: 8px !important; }
            .tier-table td { font-size: 10px !important; }
            .stat-big { font-size: 18px !important; }
            .section-nav-btn { font-size: 10px !important; padding: 6px 10px !important; }
            .mobile-stat-grid-4 { grid-template-columns: 1fr 1fr !important; }
        }

        /* Print Styles */
        @media print {
            * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            html, body { background: #FFFFFF !important; color: #1E293B !important; font-size: 9px !important; padding: 10px !important; }
            .card { break-inside: avoid; page-break-inside: avoid; border: 1px solid #E2E8F0 !important; background: #FFFFFF !important; }
            .kpi-card { background: #F8FAFC !important; border: 1px solid #E2E8F0 !important; }
            .header-title { -webkit-text-fill-color: #1E293B !important; color: #1E293B !important; background: none !important; }
            .kpi-value, .metric-value { color: #1E293B !important; }
            .kpi-label, .kpi-sub, .metric-label { color: #64748B !important; }
            .section-header-title { color: #1E293B !important; }
            .tier-table th { color: #64748B !important; }
            .tier-table td { color: #1E293B !important; }
            .callout { background: #F8FAFC !important; border-left-width: 3px !important; }
            .exec-summary, .insight-item span, .takeaway-content span { color: #475569 !important; }
            .footer { color: #94A3B8 !important; }
            .period-toggle { display: none; }
        }
        /* ================================================================
           FEATURE #2: Animated KPI Counters
           ================================================================ */
        .kpi-value { display: inline-block; }
        @keyframes kpiPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .kpi-value.counted { animation: kpiPulse 0.3s ease-out; }

        /* ================================================================
           FEATURE #3: PDF Export Button + Toast
           ================================================================ */
        .header-actions {
            display: flex; align-items: center; gap: 6px; margin-top: 4px;
        }
        .header-action-btn {
            padding: 5px 12px; border-radius: 8px; font-size: 9px; font-weight: 600;
            cursor: pointer; border: 1px solid rgba(148, 163, 184, 0.2);
            background: rgba(15, 23, 42, 0.6); color: #94A3B8;
            font-family: 'DM Sans', sans-serif; transition: all 0.25s ease;
            display: inline-flex; align-items: center; gap: 5px;
        }
        .header-action-btn:hover {
            border-color: rgba(245, 158, 11, 0.4); color: #F59E0B;
            box-shadow: 0 2px 12px rgba(245, 158, 11, 0.12);
        }
        .export-toast {
            position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(60px);
            background: rgba(30, 41, 59, 0.95); color: #10B981;
            padding: 10px 20px; border-radius: 10px; font-size: 10px; font-weight: 600;
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 8px 24px rgba(0,0,0,0.4); z-index: 9999;
            opacity: 0; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none; font-family: 'DM Sans', sans-serif;
            backdrop-filter: blur(8px);
        }
        .export-toast.visible { opacity: 1; transform: translateX(-50%) translateY(0); }

        /* ================================================================
           FEATURE #4: Comparison Split-Screen
           ================================================================ */
        .compare-wrapper { padding: 8px 0; }
        .compare-title {
            text-align: center; margin-bottom: 16px;
            font-size: 12px; font-weight: 700; color: #F8FAFC;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .compare-title span { color: #F59E0B; }
        .compare-kpi-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
            margin-bottom: 16px;
        }
        .compare-kpi-card {
            background: rgba(15, 23, 42, 0.6); border-radius: 12px; padding: 14px 12px;
            border: 1px solid rgba(148, 163, 184, 0.1); text-align: center;
            transition: all 0.3s ease;
        }
        .compare-kpi-card:hover { border-color: rgba(148, 163, 184, 0.25); transform: translateY(-2px); }
        .compare-kpi-label { font-size: 8px; color: #94A3B8; text-transform: uppercase; letter-spacing: 0.6px; margin-bottom: 8px; font-weight: 700; }
        .compare-row { display: flex; align-items: center; justify-content: center; gap: 10px; }
        .compare-val { font-size: 18px; font-weight: 800; min-width: 56px; }
        .compare-val.jan { color: #94A3B8; }
        .compare-val.feb { color: #F8FAFC; }
        .compare-arrow { font-size: 14px; font-weight: 800; }
        .compare-arrow.improved { color: #10B981; }
        .compare-arrow.worsened { color: #EF4444; }
        .compare-arrow.flat { color: #64748B; }
        .compare-delta { font-size: 9px; font-weight: 700; margin-top: 4px; }
        .compare-charts-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 14px;
        }
        .compare-chart-card {
            background: rgba(15, 23, 42, 0.5); border-radius: 12px; padding: 14px;
            border: 1px solid rgba(148, 163, 184, 0.08); text-align: center;
        }
        .compare-chart-label { font-size: 9px; font-weight: 700; color: #94A3B8; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
        .compare-chart-wrap { height: 140px; position: relative; }
        .compare-bucket-card {
            background: rgba(15, 23, 42, 0.5); border-radius: 12px; padding: 16px;
            border: 1px solid rgba(148, 163, 184, 0.08); margin-bottom: 14px;
        }
        .compare-bucket-title { font-size: 10px; font-weight: 700; color: #F8FAFC; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .compare-bucket-row {
            display: grid; grid-template-columns: 1.2fr 0.7fr 2.2fr 0.4fr 2.2fr 0.7fr 0.7fr;
            align-items: center; gap: 4px; padding: 5px 8px; font-size: 9px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.06);
            transition: background 0.15s ease;
        }
        .compare-bucket-row:hover { background: rgba(255,255,255,0.02); }
        .compare-bucket-row.header-row { border-bottom: 1px solid rgba(148,163,184,0.15); padding-bottom: 7px; margin-bottom: 2px; }
        .compare-bucket-row.header-row div { font-size: 7px; color: #64748B; font-weight: 700; text-transform: uppercase; letter-spacing: 0.4px; }
        .compare-bar { height: 14px; border-radius: 3px; min-width: 2px; transition: width 0.6s ease; }
        .compare-summary-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.06), rgba(15, 23, 42, 0.5));
            border: 1px solid rgba(16, 185, 129, 0.15); border-radius: 12px;
            padding: 16px; text-align: center;
        }
        .compare-summary-card .headline { font-size: 11px; font-weight: 700; color: #10B981; margin-bottom: 6px; }
        .compare-summary-card .detail { font-size: 9px; color: #94A3B8; line-height: 1.5; }
        .compare-summary-card .detail strong { color: #F8FAFC; }

        /* ================================================================
           FEATURE #5: KPI Sparklines on Hover
           ================================================================ */
        /* Sparkline tooltip: rendered as body-level floating element to escape all stacking contexts */
        .kpi-sparkline-wrap {
            display: none; /* Hidden inline — content moved to body-level #sparkFloat on hover */
        }
        #sparkFloat {
            position: fixed; 
            background: rgba(15, 23, 42, 0.97); border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 10px; padding: 10px 14px 5px 14px; z-index: 99999;
            box-shadow: 0 8px 28px rgba(0,0,0,0.55);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            white-space: nowrap;
        }
        #sparkFloat.visible { opacity: 1; }
        .kpi-card { position: relative; overflow: visible; }
        .kpi-strip { overflow: visible; }
        .kpi-sparkline-label {
            font-size: 8px; color: #64748B; text-align: center;
            margin-top: 3px; letter-spacing: 0.3px;
        }

        /* ================================================================
           FEATURE #6: Light Theme Toggle
           ================================================================ */
        .theme-toggle-btn {
            width: 28px; height: 28px; border-radius: 7px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            background: rgba(15, 23, 42, 0.6); color: #94A3B8;
            cursor: pointer; font-size: 13px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s ease; font-family: 'DM Sans', sans-serif;
        }
        .theme-toggle-btn:hover { border-color: rgba(245, 158, 11, 0.4); color: #F59E0B; }

        /* =================================================================
           PorchPass Brand Light Theme — v5 FINAL (Figma-Faithful)
           
           THE KEY INSIGHT: PorchPass uses a BLUE-WASHED page background
           (#E1E8FF from Dashboard.svg) with WHITE elements floating on it.
           This creates the signature airy, blue-cloud aesthetic.
           
           Font:     Figtree (PorchPass brand typeface from Figma)
           Page BG:  #E1E8FF (from Dashboard.svg content area)
           Cards:    #FFFFFF floating on blue with blue-tinted shadows
           Primary:  #4075FF (brand) / #1453F5 (CTA)
           Text:     #111827 / #31394A / #4A5466 / #697083 / #9AA2B2
           Borders:  #E5EBFD (blue-tinted, NOT gray)
           Shadows:  rgba(64,117,255,...) — always blue-tinted
           Status:   ok#017C3F/#DBF8E7  warn#965904/#FFECBD  bad#B93C3C/#F3E7E8
           ================================================================= */

        /* --- Page & Root --- */
        body.light-theme {
            background: #E1E8FF;
            color: #111827;
            font-family: 'Figtree', 'DM Sans', -apple-system, sans-serif;
        }

        /* --- Header (white, floating on blue) --- */
        body.light-theme .header { border-bottom: none; background: #FFFFFF; backdrop-filter: none; border-radius: 12px; padding: 16px 24px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(64,117,255,0.08); }
        body.light-theme .header-title { background: none; -webkit-text-fill-color: #111827; color: #111827; }
        body.light-theme .porchpass-logo .logo-text { fill: #31394A; }
        body.light-theme .header-subtitle { color: #697083; }
        body.light-theme .header-right { color: #697083; }
        body.light-theme .header-right strong { color: #111827; }
        body.light-theme .header-badge { background: #4075FF; color: #FFFFFF; }

        /* --- Period Toggle --- */
        body.light-theme .period-btn { background: #FFFFFF; border: 1.5px solid #E5EBFD; color: #697083; box-shadow: 0 1px 2px rgba(64,117,255,0.06); }
        body.light-theme .period-btn:hover { border-color: #CCDAFF; color: #31394A; background: #FAFBFF; }
        body.light-theme .period-btn.active { background: #1453F5; border-color: #1453F5; color: #FFFFFF; box-shadow: 0 2px 8px rgba(20,83,245,0.25); }

        /* --- KPI Cards (white, floating on blue bg) --- */
        body.light-theme .kpi-card { background: #FFFFFF; border: 1px solid #E5EBFD; box-shadow: 0 1px 3px rgba(64,117,255,0.06); }
        body.light-theme .kpi-card:hover { box-shadow: 0 4px 12px rgba(64,117,255,0.1); border-color: #CCDAFF; transform: translateY(-1px); z-index: 200; }
        body.light-theme .kpi-label { color: #697083; font-weight: 600; letter-spacing: 0.3px; }
        body.light-theme .kpi-sub { color: #9AA2B2; }
        body.light-theme .kpi-sub.positive { color: #017C3F; }
        body.light-theme .kpi-sub.negative { color: #B93C3C; }
        body.light-theme .kpi-sub.warn { color: #965904; }

        /* --- Content Cards (white, floating) --- */
        body.light-theme .card { background: #FFFFFF; border: 1px solid #E5EBFD; box-shadow: 0 1px 3px rgba(64,117,255,0.06); backdrop-filter: none; border-radius: 12px; }
        body.light-theme .card:hover { box-shadow: 0 4px 12px rgba(64,117,255,0.1); border-color: #CCDAFF; }

        /* --- Card Variants --- */
        body.light-theme .card.watch { border-left: 3px solid #B93C3C; }
        body.light-theme .card.strength { border-left: 3px solid #017C3F; }
        body.light-theme .card.highlight { background: linear-gradient(137.88deg, #CCDAFF -65.41%, #FFFFFF 52.75%); border: 1px solid #E5EBFD; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 0 1px 3px rgba(64,117,255,0.06); }
        body.light-theme .card.premium { background: linear-gradient(137.88deg, #CCDAFF -65.41%, #FFFFFF 52.75%); border: 1px solid #E5EBFD; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 0 1px 3px rgba(64,117,255,0.06); }
        body.light-theme .card.board-narrative { background: linear-gradient(135deg, #F0F4FF, #FFFFFF) !important; border: 1px solid #E5EBFD !important; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 0 1px 3px rgba(64,117,255,0.06); }

        /* --- Section Headers & Titles --- */
        body.light-theme .section-header-title { color: #111827; font-weight: 700; }

        /* --- Tables (Figma-exact: header #31394A/500wt, cells #111827, border #E5EBFD) --- */
        body.light-theme .tier-table th { color: #31394A; border-bottom: 1px solid #E5EBFD; font-weight: 500; letter-spacing: -0.006em; background: transparent; }
        body.light-theme .tier-table td { color: #111827; border-bottom: 1px solid #F3F5F8; }
        body.light-theme .tier-table tr:hover td { background: rgba(64,117,255,0.04); }
        body.light-theme .tier-table tbody tr:nth-child(even) td { background: rgba(64,117,255,0.015); }
        body.light-theme .tier-table tbody tr:nth-child(even):hover td { background: rgba(64,117,255,0.05); }

        /* --- Callouts --- */
        body.light-theme .callout { border-radius: 8px; font-weight: 500; background: #E5EBFD; border-left: 3px solid #4075FF; color: #31394A; }
        body.light-theme .callout.info { background: #E5EBFD; border-left-color: #4075FF; }
        body.light-theme .callout.warning { background: #FFECBD; border-left-color: #965904; }
        body.light-theme .callout.danger { background: #F3E7E8; border-left-color: #B93C3C; }
        body.light-theme .callout.success { background: #DBF8E7; border-left-color: #017C3F; }

        /* --- Metrics (Portfolio Profile) --- */
        body.light-theme .metric-item { background: #F3F5F8; border: 1px solid #E5EBFD; border-radius: 12px; }
        body.light-theme .metric-label { color: #697083; font-weight: 500; }
        body.light-theme .metric-value { color: #111827; }

        /* --- Insight Items --- */
        body.light-theme .insight-item span { color: #4A5466; }
        body.light-theme .insight-item strong { color: #111827; }

        /* --- Executive Summary --- */
        body.light-theme .exec-summary { color: #4A5466; line-height: 1.7; }
        body.light-theme .exec-summary strong { color: #111827; }

        /* --- Section Divider (visible on blue bg) --- */
        body.light-theme .section-divider { color: #4A5466; font-weight: 600; }
        body.light-theme .section-divider::before, body.light-theme .section-divider::after { background: linear-gradient(90deg, transparent, #CCDAFF, transparent); }

        /* --- Section Navigation (white pill, floating) --- */
        body.light-theme .section-nav { background: #FFFFFF; border: 1px solid #E5EBFD; box-shadow: 0 1px 3px rgba(64,117,255,0.08); }
        body.light-theme .section-nav-btn { color: #697083; font-weight: 600; }
        body.light-theme .section-nav-btn:hover { color: #31394A; background: #F3F5F8; }
        body.light-theme .section-nav-btn.active { background: #1453F5; color: #FFFFFF; box-shadow: 0 2px 6px rgba(20,83,245,0.2); }
        body.light-theme .section-nav-btn .nav-count { background: rgba(64,117,255,0.08); color: #9AA2B2; }
        body.light-theme .section-nav-btn.active .nav-count { background: rgba(255,255,255,0.2); color: #FFFFFF; }

        /* --- Key Takeaways --- */
        body.light-theme .takeaway-item { background: #FFFFFF; border: 1px solid #E5EBFD; box-shadow: 0 1px 2px rgba(64,117,255,0.04); }
        body.light-theme .takeaway-content span { color: #4A5466; }
        body.light-theme .takeaway-content strong { color: #111827; }
        body.light-theme .key-takeaways .takeaway-item:hover { border-color: #CCDAFF; box-shadow: 0 2px 8px rgba(64,117,255,0.08); }

        /* --- Footer (white, floating) --- */
        body.light-theme .footer { color: #697083; border-top: none; background: #FFFFFF; border-radius: 12px; padding: 10px 24px; box-shadow: 0 1px 3px rgba(64,117,255,0.06); }
        body.light-theme .footer strong { color: #4A5466; }

        /* --- Tooltips (dark for contrast) --- */
        body.light-theme .kpi-card.has-tooltip .kpi-tooltip { background: #111827; border: 1px solid rgba(64,117,255,0.3); color: #C4C9CF; box-shadow: 0 8px 24px rgba(17,24,39,0.2); }
        body.light-theme .kpi-card.has-tooltip .kpi-tooltip strong { color: #FFFFFF; }
        body.light-theme .th-tooltip .th-tooltip-content { background: #111827; border: 1px solid rgba(64,117,255,0.3); color: #C4C9CF; box-shadow: 0 8px 24px rgba(17,24,39,0.2); }
        body.light-theme .th-tooltip .th-tooltip-content strong { color: #FFFFFF; }

        /* --- Stats & Rolls --- */
        body.light-theme .stat-highlight { background: #F3F5F8; border: 1px solid #E5EBFD; }
        body.light-theme .stat-desc { color: #4A5466; }
        body.light-theme .stat-desc strong { color: #111827; }
        body.light-theme .stat-big { filter: brightness(0.75); }
        body.light-theme .roll-bucket { color: #111827; }
        body.light-theme .roll-val { color: #4A5466; }
        body.light-theme .roll-row { border-bottom-color: #E5EBFD; }

        /* --- Action Buttons --- */
        body.light-theme .header-action-btn { background: #1453F5; color: #FFFFFF; border: 1.5px solid #1453F5; border-radius: 20px; }
        body.light-theme .header-action-btn:hover { background: #013ACC; border-color: #013ACC; box-shadow: 0 2px 8px rgba(20,83,245,0.2); }
        body.light-theme .theme-toggle-btn { background: #FFFFFF; color: #4A5466; border: 1.5px solid #E5EBFD; }
        body.light-theme .theme-toggle-btn:hover { border-color: #CCDAFF; color: #4075FF; background: #FAFBFF; }
        body.light-theme .scroll-top-btn { background: #1453F5; border: none; color: #FFFFFF; box-shadow: 0 2px 8px rgba(20,83,245,0.25); }

        /* --- Sparkline Float --- */
        body.light-theme #sparkFloat { background: #111827; border: 1px solid rgba(64,117,255,0.3); box-shadow: 0 8px 24px rgba(17,24,39,0.25); }
        body.light-theme .kpi-sparkline-label { color: #697083; }

        /* --- Compare View --- */
        body.light-theme .compare-kpi-card { background: #FFFFFF; border: 1px solid #E5EBFD; }
        body.light-theme .compare-val.jan { color: #9AA2B2; }
        body.light-theme .compare-val.feb { color: #111827; }
        body.light-theme .compare-chart-card { background: #FFFFFF; border: 1px solid #E5EBFD; }
        body.light-theme .compare-bucket-card { background: #FFFFFF; border: 1px solid #E5EBFD; }
        body.light-theme .compare-bucket-row { border-bottom-color: #E5EBFD; color: #4A5466; }
        body.light-theme .compare-bucket-row.header-row div { color: #697083; }
        body.light-theme .compare-summary-card { background: linear-gradient(137.88deg, #CCDAFF -65.41%, #FFFFFF 52.75%); border: 1px solid #E5EBFD; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4); }
        body.light-theme .compare-summary-card .headline { color: #1453F5; }
        body.light-theme .compare-summary-card .detail { color: #4A5466; }
        body.light-theme .compare-summary-card .detail strong { color: #111827; }
        body.light-theme .compare-title { color: #111827; }
        body.light-theme .compare-kpi-label { color: #697083; }
        body.light-theme .compare-chart-label { color: #697083; }
        body.light-theme .compare-bucket-title { color: #111827; }
        body.light-theme .chart-legend { color: #4A5466; }
        body.light-theme .chart-legend-small { color: #697083; }
        /* ================================================================
           FEATURE #7: Card Expand / Focus Mode
           ================================================================ */
        .card-expand-btn {
            position: absolute; top: 8px; right: 8px; width: 22px; height: 22px;
            border-radius: 5px; border: none; cursor: pointer;
            background: rgba(148,163,184,0.06); color: rgba(148,163,184,0.3);
            font-size: 11px; display: flex; align-items: center; justify-content: center;
            transition: all 0.2s ease; z-index: 5; font-family: 'DM Sans', sans-serif;
            opacity: 0;
        }
        .card:hover .card-expand-btn { opacity: 1; }
        .card-expand-btn:hover { background: rgba(245,158,11,0.15); color: #F59E0B; }
        .card { position: relative; }
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7); z-index: 5000;
            display: none; align-items: center; justify-content: center;
            padding: 24px; backdrop-filter: blur(4px);
        }
        .modal-overlay.active { display: flex; animation: modalFadeIn 0.25s ease-out; }
        .modal-overlay.closing { animation: modalFadeOut 0.2s ease-in forwards; }
        .modal-overlay.closing .modal-content-wrap { animation: modalSlideOut 0.2s ease-in forwards; }
        @keyframes modalFadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes modalFadeOut { from { opacity: 1; } to { opacity: 0; } }
        @keyframes modalSlideOut { from { transform: scale(1) translateY(0); opacity: 1; } to { transform: scale(0.95) translateY(10px); opacity: 0; } }
        .modal-content-wrap {
            position: relative;
            background: rgba(30,41,59,0.98); border: 1px solid rgba(148,163,184,0.2);
            border-radius: 16px; padding: 28px; max-width: 92vw; max-height: 88vh;
            overflow-y: auto; box-shadow: 0 24px 64px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s cubic-bezier(0.4,0,0.2,1);
            width: 100%;
        }
        @keyframes modalSlideIn { from { transform: scale(0.95) translateY(10px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }
        .modal-close-btn {
            position: absolute; top: 12px; right: 16px; width: 28px; height: 28px;
            border-radius: 6px; border: none; cursor: pointer;
            background: rgba(148,163,184,0.1); color: #94A3B8;
            font-size: 14px; display: flex; align-items: center; justify-content: center;
            transition: all 0.2s ease; font-family: 'DM Sans', sans-serif; z-index: 10;
        }
        .modal-close-btn:hover { background: rgba(239,68,68,0.2); color: #EF4444; }
        body.light-theme .modal-content-wrap { background: #FFFFFF; border: 1px solid #E5EBFD; box-shadow: 0 16px 32px rgba(64,117,255,0.12), 0 4px 12px rgba(64,117,255,0.06); }
        body.light-theme .modal-close-btn { background: #FAFBFF; color: #697083; border: 1px solid #E5EBFD; }
        body.light-theme .modal-close-btn:hover { background: #F3E7E8; color: #B93C3C; border-color: #B93C3C; }
        body.light-theme .card-expand-btn { background: transparent; color: #CCDAFF; }
        body.light-theme .card-expand-btn:hover { background: #FAFBFF; color: #4075FF; }

        /* --- Expanded Detail Table (modal full-dataset view) --- */
        .expanded-detail-wrap { overflow-x: auto; margin: 8px 0; }
        .expanded-detail-wrap table.tier-table { min-width: 1400px; }
        .expanded-detail-wrap table.tier-table th { white-space: nowrap; font-size: 7.5px; padding: 6px 8px; text-align: center; }
        .expanded-detail-wrap table.tier-table th:first-child { text-align: left; }
        .expanded-detail-wrap table.tier-table td { white-space: nowrap; font-size: 9px; padding: 5px 8px; text-align: center; }
        .expanded-detail-wrap table.tier-table td:first-child { text-align: left; }
        .expanded-detail-wrap table.tier-table tr.total-row td { font-weight: 700; border-top: 2px solid rgba(148,163,184,0.3); }
        body.light-theme .expanded-detail-wrap table.tier-table tr.total-row td { border-top: 2px solid #CCDAFF; }
        .expanded-detail-title { font-size: 8px; color: #64748B; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; margin: 0 0 4px 0; }
        body.light-theme .expanded-detail-title { color: #697083; }

        /* ================================================================
           FEATURE #8: Chart Annotation Overlays (hover-only)
           ================================================================ */
        .chart-annotations {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none; opacity: 0;
            transition: opacity 0.35s ease;
        }
        .card:hover .chart-annotations { opacity: 1; }
        .chart-anno-tag {
            position: absolute; font-size: 7px; font-weight: 700;
            padding: 2px 6px; border-radius: 4px; white-space: nowrap;
            letter-spacing: 0.2px; pointer-events: none;
        }
        .chart-anno-tag.green { background: rgba(16,185,129,0.15); color: #10B981; border: 1px solid rgba(16,185,129,0.2); }
        .chart-anno-tag.amber { background: rgba(245,158,11,0.12); color: #F59E0B; border: 1px solid rgba(245,158,11,0.2); }
        .chart-anno-tag.red { background: rgba(239,68,68,0.12); color: #EF4444; border: 1px solid rgba(239,68,68,0.2); }
        .chart-anno-tag.slate { background: rgba(100,116,139,0.12); color: #94A3B8; border: 1px solid rgba(100,116,139,0.2); }

        /* ================================================================
           FEATURE #4: Subtle Compare Link
           ================================================================ */
        .compare-link-btn {
            display: inline-flex; align-items: center; gap: 4px;
            font-size: 8.5px; font-weight: 600; color: #64748B;
            border: 1px solid rgba(148, 163, 184, 0.15); border-radius: 6px;
            padding: 3px 12px; cursor: pointer; background: rgba(148, 163, 184, 0.04);
            transition: all 0.25s ease; font-family: 'DM Sans', sans-serif;
            letter-spacing: 0.3px; text-transform: uppercase;
        }
        .compare-link-btn:hover { color: #F59E0B; border-color: rgba(245, 158, 11, 0.3); background: rgba(245, 158, 11, 0.04); }
        .compare-link-btn.active { color: #F59E0B; border-color: rgba(245, 158, 11, 0.4); background: rgba(245, 158, 11, 0.08); }
        body.light-theme .compare-link-btn { color: #697083; border-color: #E5EBFD; background: #FFFFFF; }
        body.light-theme .compare-link-btn:hover { color: #4075FF; border-color: #CCDAFF; background: #FAFBFF; }
        body.light-theme .compare-link-btn.active { color: #1453F5; border-color: #1453F5; background: #E5EBFD; }

        /* ================================================================
           FEATURE #5: Card stagger entrance animations
           ================================================================ */
        @keyframes cardSlideUp {
            from { opacity: 0; transform: translateY(18px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes valueFlash {
            0% { opacity: 0.3; transform: scale(0.95); }
            60% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 1; transform: scale(1); }
        }
        .feb-section.section-entering .card {
            animation: cardSlideUp 0.4s cubic-bezier(0.22, 0.61, 0.36, 1) both;
        }
        .feb-section.section-entering .card:nth-child(2) { animation-delay: 0.06s; }
        .feb-section.section-entering .card:nth-child(3) { animation-delay: 0.12s; }
        .feb-section.section-entering .card:nth-child(4) { animation-delay: 0.18s; }
        .feb-section.section-entering .card:nth-child(5) { animation-delay: 0.24s; }
        .feb-section.section-entering .section-divider { animation: cardSlideUp 0.3s ease both; }

        @media print {
            .header-actions, .theme-toggle-btn, .card-expand-btn, .modal-overlay,
            .export-toast, .chart-annotations, .compare-link-btn { display: none !important; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="header">
        <div>
            <div class="header-title-row">
                <h1 class="header-title">Rogue Portfolio &#8212; DQ Dashboard</h1>
                <span class="header-badge" id="hdr-badge">FEB 2026 MTD</span>
            </div>
            <div class="header-subtitle" id="hdr-subtitle">PorchPass Manufactured Housing Finance &#8226; Delinquency &amp; Portfolio Analytics &#8226; As of February 15, 2026</div>
        </div>
        <div class="header-right">
            <div id="hdr-date">Report Date: <strong>February 15, 2026</strong></div>
            <div>PorchPass, LLC &#8226; NMLS #2489505</div>
            <div style="margin-top: 2px; color: #F59E0B; font-weight: 600;" id="hdr-denom">All rates = Count / 413 Total Loans</div>
            <div class="header-actions">
                <button class="header-action-btn" onclick="exportPDF()" title="Export as PDF">&#x1F4C4; Export PDF</button>
                <button class="theme-toggle-btn" id="themeToggleBtn" onclick="toggleTheme()" title="Toggle light/dark theme">&#x2600;</button>
            </div>
        </div>
    </div>

    <!-- Period Toggle Row -->
    <div class="period-toggle-row" style="display: flex; align-items: center; justify-content: center; padding: 10px 30px 8px 30px; position: relative;">
        <div class="period-toggle" style="margin: 0;">
            <button class="period-btn" onclick="togglePeriod('jan')">January 2026 EOM</button>
            <button class="period-btn active" onclick="togglePeriod('feb')">February 2026 MTD</button>
        </div>
        <button class="compare-link-btn" id="compareLinkBtn" onclick="togglePeriod('compare')" style="position: absolute; right: 30px;">&#x2194; Compare Jan vs Feb</button>
    </div>

    <div id="feb-content">
    <!-- KPI Strip -->
    <div class="kpi-strip" style="grid-template-columns: repeat(6, 1fr);">
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">DQ30+ = All loans 30+ days past due<br>16 loans with 30+ DPD<br>UPB: $1,666,548 (3.21% of total)<br>Average DPD (DQ30-59): 43 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_dq30_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#10B981" stop-opacity="0.4"/><stop offset="100%" stop-color="#10B981" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,16.9 65.0,24.6 118.0,33.1 118.0,50 12.0,50" fill="url(#spark_dq30_g)"/><polyline points="12.0,16.9 65.0,24.6 118.0,33.1" fill="none" stroke="#10B981" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="16.9" r="3.5" fill="white"/><circle cx="12.0" cy="16.9" r="2.5" fill="#10B981"/><circle cx="65.0" cy="24.6" r="3.5" fill="white"/><circle cx="65.0" cy="24.6" r="2.5" fill="#10B981"/><circle cx="118.0" cy="33.1" r="5" fill="white"/><circle cx="118.0" cy="33.1" r="3.5" fill="#10B981"/><text x="12.0" y="9" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">8.56%</text><text x="65.0" y="15.600000000000001" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">6.34%</text><text x="118.0" y="24.1" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3.87%</text></svg><div class="kpi-sparkline-label">Dec → Jan → Feb</div></div>
            <div class="kpi-label">DQ30+ Rate</div>
            <div class="kpi-value" style="color: #10B981;" data-target="3.87" data-suffix="%" data-decimals="2">3.87%</div>
            <div class="kpi-sub positive">16 loans | $1.67M UPB</div>
            <div class="kpi-change down">&#9660; from 6.34% Jan</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">14 non-performing loans with 60+ DPD<br>Includes 60-89 DPD and 120+<br>UPB: $1,473,038 (2.84% of total)<br>Average DPD (DQ60-119): 65 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_dq60_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#F59E0B" stop-opacity="0.4"/><stop offset="100%" stop-color="#F59E0B" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,24.7 65.0,16.9 118.0,33.1 118.0,50 12.0,50" fill="url(#spark_dq60_g)"/><polyline points="12.0,24.7 65.0,16.9 118.0,33.1" fill="none" stroke="#F59E0B" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="24.7" r="3.5" fill="white"/><circle cx="12.0" cy="24.7" r="2.5" fill="#F59E0B"/><circle cx="65.0" cy="16.9" r="3.5" fill="white"/><circle cx="65.0" cy="16.9" r="2.5" fill="#F59E0B"/><circle cx="118.0" cy="33.1" r="5" fill="white"/><circle cx="118.0" cy="33.1" r="3.5" fill="#F59E0B"/><text x="12.0" y="15.7" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3.53%</text><text x="65.0" y="9" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3.66%</text><text x="118.0" y="24.1" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3.39%</text></svg><div class="kpi-sparkline-label">Dec → Jan → Feb</div></div>
            <div class="kpi-label">DQ60+ Rate</div>
            <div class="kpi-value" style="color: #F59E0B;" data-target="3.39" data-suffix="%" data-decimals="2">3.39%</div>
            <div class="kpi-sub warn">14 loans | $1.47M UPB</div>
            <div class="kpi-change down">&#9660; from 3.66% Jan</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">5 Demanded loans<br>UPB: $568,552 (1.10% of total)<br>Average DPD: 60 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_demanded_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#F97316" stop-opacity="0.4"/><stop offset="100%" stop-color="#F97316" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,16.9 118.0,33.1 118.0,50 12.0,50" fill="url(#spark_demanded_g)"/><polyline points="12.0,16.9 118.0,33.1" fill="none" stroke="#F97316" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="16.9" r="3.5" fill="white"/><circle cx="12.0" cy="16.9" r="2.5" fill="#F97316"/><circle cx="118.0" cy="33.1" r="5" fill="white"/><circle cx="118.0" cy="33.1" r="3.5" fill="#F97316"/><text x="12.0" y="9" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">7</text><text x="118.0" y="24.1" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">5</text></svg><div class="kpi-sparkline-label">Jan → Feb</div></div>
            <div class="kpi-label">Demanded</div>
            <div class="kpi-value" style="color: #F97316;" data-target="5" data-suffix="" data-decimals="0">5</div>
            <div class="kpi-sub warn">1.21% of loans | $569K UPB</div>
            <div class="kpi-change down">&#9660; from 7 Jan</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">9 Notice to Vacate loans<br>UPB: $904,487 (1.74% of total)<br>Average DPD: 149 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_ntv_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#F97316" stop-opacity="0.4"/><stop offset="100%" stop-color="#F97316" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,16.9 118.0,33.1 118.0,50 12.0,50" fill="url(#spark_ntv_g)"/><polyline points="12.0,16.9 118.0,33.1" fill="none" stroke="#F97316" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="16.9" r="3.5" fill="white"/><circle cx="12.0" cy="16.9" r="2.5" fill="#F97316"/><circle cx="118.0" cy="33.1" r="5" fill="white"/><circle cx="118.0" cy="33.1" r="3.5" fill="#F97316"/><text x="12.0" y="9" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">11</text><text x="118.0" y="24.1" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">9</text></svg><div class="kpi-sparkline-label">Jan → Feb</div></div>
            <div class="kpi-label">Notice to Vacate</div>
            <div class="kpi-value" style="color: #F97316;" data-target="9" data-suffix="" data-decimals="0">9</div>
            <div class="kpi-sub warn">2.18% of loans | $905K UPB</div>
            <div class="kpi-change down">&#9660; from 11 Jan</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Loans in Repo / Foreclosure Process<br>UPB: $507,803 (0.98% of total)<br>Average DPD: 232 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_repo_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#64748B" stop-opacity="0.4"/><stop offset="100%" stop-color="#64748B" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,25.0 65.0,25.0 118.0,25.0 118.0,50 12.0,50" fill="url(#spark_repo_g)"/><polyline points="12.0,25.0 65.0,25.0 118.0,25.0" fill="none" stroke="#64748B" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="25.0" r="3.5" fill="white"/><circle cx="12.0" cy="25.0" r="2.5" fill="#64748B"/><circle cx="65.0" cy="25.0" r="3.5" fill="white"/><circle cx="65.0" cy="25.0" r="2.5" fill="#64748B"/><circle cx="118.0" cy="25.0" r="5" fill="white"/><circle cx="118.0" cy="25.0" r="3.5" fill="#64748B"/><text x="12.0" y="16.0" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3</text><text x="65.0" y="16.0" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3</text><text x="118.0" y="16.0" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">3</text></svg><div class="kpi-sparkline-label">Dec → Jan → Feb</div></div>
            <div class="kpi-label">Repo</div>
            <div class="kpi-value" style="color: #DC2626;" data-target="3" data-suffix="" data-decimals="0">3</div>
            <div class="kpi-sub negative">0.73% of loans | $508K UPB</div>
            <div class="kpi-change" style="color: #94A3B8;">&#8212; flat from Jan</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Performing = Paid Off + First Pmt Not Due + Current<br>394 of 413 total loans = 95.40%<br>UPB: $49,665,998 (95.81% of total)<br>Average DPD: 2 Days</div>
            <div class="kpi-sparkline-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="130" height="50" viewBox="0 0 130 50" style="display:block;"><defs><linearGradient id="spark_perf_g" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#10B981" stop-opacity="0.4"/><stop offset="100%" stop-color="#10B981" stop-opacity="0.02"/></linearGradient></defs><polygon points="12.0,33.1 65.0,28.8 118.0,16.9 118.0,50 12.0,50" fill="url(#spark_perf_g)"/><polyline points="12.0,33.1 65.0,28.8 118.0,16.9" fill="none" stroke="#10B981" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/><circle cx="12.0" cy="33.1" r="3.5" fill="white"/><circle cx="12.0" cy="33.1" r="2.5" fill="#10B981"/><circle cx="65.0" cy="28.8" r="3.5" fill="white"/><circle cx="65.0" cy="28.8" r="2.5" fill="#10B981"/><circle cx="118.0" cy="16.9" r="5" fill="white"/><circle cx="118.0" cy="16.9" r="3.5" fill="#10B981"/><text x="12.0" y="24.1" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">92.0%</text><text x="65.0" y="19.8" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">92.9%</text><text x="118.0" y="9" text-anchor="middle" fill="white" font-size="9" font-weight="700" font-family="DM Sans,sans-serif" style="text-shadow:0 1px 3px rgba(0,0,0,0.8)">95.4%</text></svg><div class="kpi-sparkline-label">Dec → Jan → Feb</div></div>
            <div class="kpi-label">Performing</div>
            <div class="kpi-value" style="color: #10B981;" data-target="95.4" data-suffix="%" data-decimals="1">95.4%</div>
            <div class="kpi-sub positive">394 loans | $49.7M UPB</div>
            <div class="kpi-change down">&#9650; from 92.9% Jan</div>
        </div>
    </div>

    <!-- Section Sub-Navigation -->
    <div class="section-nav" id="feb-section-nav">
        <button class="section-nav-btn active" onclick="showFebSection('all')">All Sections</button>
        <button class="section-nav-btn" onclick="showFebSection('trends')">Trends &amp; Status <span class="nav-count">3</span></button>
        <button class="section-nav-btn" onclick="showFebSection('segmentation')">Risk Segmentation <span class="nav-count">5</span></button>
        <button class="section-nav-btn" onclick="showFebSection('performance')">Performance &amp; Outlook <span class="nav-count">6</span></button>
        <button class="section-nav-btn" onclick="showFebSection('intelligence')">Advanced Portfolio Intelligence <span class="nav-count">6</span></button>
    </div>

    <div class="feb-section" data-section="trends">
    <!-- Grid Row 1: Historical DQ + DPD Distribution + Cure/Status -->
    <div class="grid-row-1">
        <!-- Historical DQ Chart -->
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C9;</span>
                <span class="section-header-title">Delinquency Trend (Dec 2025 &#8594; Feb 2026 MTD)</span>
            </div>
            <div class="chart-140">
                <canvas id="historicalDqChart"></canvas>
                <div class="chart-annotations">
                    <span class="chart-anno-tag amber" style="top: 18%; left: 10%;">Dec YE Spike</span>
                    <span class="chart-anno-tag green" style="top: 56%; right: 6%;">&#x2193; 55% from Dec</span>
                    <span class="chart-anno-tag red" style="top: 55%; left: 42%;">DQ60 peaked</span>
                </div>
            </div>
            <div class="chart-legend">
                <span>&#x1F7E0; DQ30+ Rate</span>
                <span>&#x1F534; DQ60+ Rate</span>
                <span>&#x2B1B; 120+ DPD</span>
            </div>
        </div>

        <!-- DPD Distribution -->
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C6;</span>
                <span class="section-header-title">DPD Distribution &#8212; Feb 2026 MTD</span>
            </div>
            <div class="chart-140">
                <canvas id="dpdChart"></canvas>
            </div>
            <div class="dpd-legend">
                <div class="dpd-item"><span class="dpd-dot" style="background: #10B981;"></span>Current (352)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #84CC16;"></span>1-29 (34)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #F59E0B;"></span>30-59 (2)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #F97316;"></span>60-89 (8)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #EF4444;"></span>90-119 (0)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #DC2626;"></span>120+ (9)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #64748B;"></span>Paid Off (8)</div>
            </div>
            <div class="callout success" style="margin-top: 16px;">
                DQ Rate dropped -55% since December 2025. Only 2 loans remain in 30-59 DPD &#8212; lowest since March 2025
            </div>
            <div class="callout success" style="margin-top: 4px;">
                90-119 DPD bucket cleared to zero
            </div>
        </div>

        <!-- Status Breakdown -->
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4CB;</span>
                <span class="section-header-title">Portfolio Status Breakdown</span>
            </div>
            <div style="font-size: 10px; display: flex; flex-direction: column; gap: 10px;">
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #10B981; font-weight: 700;">&#x2705; Performing</span>
                        <span style="color: #F8FAFC; font-weight: 700;">394 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 95.4%; background: linear-gradient(90deg, #10B981, #059669); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">95.40% &#8226; $49.7M UPB (95.8%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #F59E0B; font-weight: 700;">&#x1F7E7; Collections (DQ30)</span>
                        <span style="color: #F8FAFC; font-weight: 700;">2 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 0.5%; min-width: 8px; background: linear-gradient(90deg, #F59E0B, #D97706); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">0.48% &#8226; $194K UPB (0.4%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #EF4444; font-weight: 700;">&#x26D3; DQ60+ / NPL</span>
                        <span style="color: #F8FAFC; font-weight: 700;">14 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 3.39%; min-width: 8px; background: linear-gradient(90deg, #EF4444, #DC2626); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">3.39% &#8226; $1.47M UPB (2.8%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #64748B; font-weight: 700;">&#x1F9FE; Paid Off</span>
                        <span style="color: #F8FAFC; font-weight: 700;">8 loans</span>
                    </div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">1.94% &#8226; $0 UPB (included in Performing)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #60A5FA; font-weight: 700;">&#x2B50; Paid Ahead</span>
                        <span style="color: #F8FAFC; font-weight: 700;">75 loans</span>
                    </div>
                    <div style="font-size: 8px; color: #60A5FA; margin-top: 2px;">18.16% &#8226; $9.59M UPB (18.5%) &#8212; voluntary prepay pool exceeds DQ exposure by factor of 4.4x</div>
                </div>
            </div>
            <div class="callout info" style="margin-top: 10px;">
                &#x1F4CC; Total: 413 loans &#8226; $51.84M UPB &#8226; Denominator = 413 for all rates
            </div>
        </div>
    </div>
    </div><!-- /section: trends -->

    <div class="feb-section" data-section="segmentation">
    <!-- Section Divider -->
    <div class="section-divider">Portfolio Segmentation &amp; Risk Analysis</div>

    <!-- Grid Row 2: Credit Tier + Land Type + Rate Bands + Weighted Avgs -->
    <div class="grid-row-2">
        <!-- Credit Tier Analysis -->
        <div class="card highlight" data-expand-table="credit-tier">
            <div class="section-header">
                <span class="section-header-icon">&#x1F3AF;</span>
                <span class="section-header-title">Credit Tier Analysis</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>Tier</th>
                    <th>Loans</th>
                    <th>UPB</th>
                    <th>Avg FICO</th>
                    <th class="th-tooltip">DQ30+
                        <div class="th-tooltip-content"><strong>DQ30+ Rate</strong> = tier DQ30+ UPB / tier total UPB<br>Shows UPB-weighted delinquency concentration</div>
                    </th>
                    <th class="th-tooltip">DQ60+
                        <div class="th-tooltip-content"><strong>DQ60+ Rate</strong> = tier DQ60+ UPB / tier total UPB</div>
                    </th>
                </tr>
                <tr>
                    <td><strong>Tier 1 (681+)</strong></td>
                    <td>329 (82.7%)</td>
                    <td>$43.1M</td>
                    <td>735</td>
                    <td class="highlight-cell">3.0%</td>
                    <td class="highlight-cell">2.7%</td>
                </tr>
                <tr>
                    <td><strong>Tier 2 (641-680)</strong></td>
                    <td>69 (17.3%)</td>
                    <td>$8.1M</td>
                    <td>659</td>
                    <td class="danger-cell">9.9%</td>
                    <td class="danger-cell">8.9%</td>
                </tr>
                <tr>
                    <td><strong>Tier 3 (600-640)</strong></td>
                    <td>7 (1.8%)</td>
                    <td>$638K</td>
                    <td>613</td>
                    <td class="danger-cell">15.1%</td>
                    <td class="danger-cell">15.1%</td>
                </tr>
            </table>
            <div class="callout warning">
                &#x26A0;&#xFE0F; Tier 2 + Tier 3: 19% of loans, DQ30+ rates 3&#8211;5x higher than Tier 1
            </div>
            <div class="callout info" style="margin-top: 4px;">
                Paid Ahead borrowers carry 20-point FICO premium (737 avg vs. 717 for rest of portfolio)
            </div>
            <div class="callout info" style="margin-top: 4px;">
                Paid Ahead Rate: &nbsp;&#8226;&nbsp; Tier 1: 22.2% (73 of 75 Paid Ahead borrowers) &nbsp;&#8226;&nbsp; Tier 2: 2.9% &nbsp;&#8226;&nbsp; Tier 3: 0%
            </div>
        </div>

        <!-- Land Type -->
        <div class="card highlight" data-expand-table="land-type">
            <div class="section-header">
                <span class="section-header-icon">&#x1F3E0;</span>
                <span class="section-header-title">Land Type Distribution</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>Land Type</th>
                    <th>Loans</th>
                    <th>UPB</th>
                    <th class="th-tooltip">DQ30+
                        <div class="th-tooltip-content"><strong>DQ30+</strong> = UPB-weighted DQ rate by land type</div>
                    </th>
                    <th>DQ60+</th>
                </tr>
                <tr>
                    <td>Customer Owned</td>
                    <td>151 (37.9%)</td>
                    <td>$20.1M</td>
                    <td class="warning-cell">4.0%</td>
                    <td>3.6%</td>
                </tr>
                <tr>
                    <td>Private Not Owned</td>
                    <td>223 (56.0%)</td>
                    <td>$28.1M</td>
                    <td class="warning-cell">4.5%</td>
                    <td>4.1%</td>
                </tr>
                <tr>
                    <td>Family Land</td>
                    <td>1 (0.3%)</td>
                    <td>$158K</td>
                    <td class="highlight-cell">0.0%</td>
                    <td class="highlight-cell">0.0%</td>
                </tr>
                <tr>
                    <td>Community</td>
                    <td>16 (4.0%)</td>
                    <td>$1.7M</td>
                    <td class="warning-cell">5.4%</td>
                    <td class="warning-cell">5.4%</td>
                </tr>
            </table>
            <div class="callout info">
                &#x1F4A1; Community lots: 4% of loans but 5.4% DQ30+ &#8212; small pool, elevated risk
            </div>
        </div>

        <!-- Note Rate Bands -->
        <div class="card highlight" data-expand-table="note-rate">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4CA;</span>
                <span class="section-header-title">Note Rate Bands</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>Rate Band</th>
                    <th>Loans</th>
                    <th>UPB</th>
                    <th>Avg Loan</th>
                    <th class="th-tooltip">DQ30+
                        <div class="th-tooltip-content"><strong>DQ30+ Rate</strong> = band DQ30+ UPB / band total UPB<br>Shows within-band delinquency concentration</div>
                    </th>
                    <th class="th-tooltip">DQ60+
                        <div class="th-tooltip-content"><strong>DQ60+ Rate</strong> = band DQ60+ UPB / band total UPB</div>
                    </th>
                </tr>
                <tr>
                    <td>&lt; 8.00%</td>
                    <td>20 (5.0%)</td>
                    <td>$2.66M</td>
                    <td>$133,122</td>
                    <td class="highlight-cell">0.0%</td>
                    <td class="highlight-cell">0.0%</td>
                </tr>
                <tr>
                    <td>8.00% &#8212; 8.49%</td>
                    <td>131 (32.9%)</td>
                    <td>$17.75M</td>
                    <td>$135,517</td>
                    <td class="highlight-cell">1.5%</td>
                    <td class="highlight-cell">0.9%</td>
                </tr>
                <tr>
                    <td>8.50% &#8212; 8.99%</td>
                    <td>162 (40.7%)</td>
                    <td>$20.95M</td>
                    <td>$129,324</td>
                    <td class="warning-cell">4.3%</td>
                    <td class="warning-cell">4.3%</td>
                </tr>
                <tr>
                    <td>9.00% &#8212; 9.99%</td>
                    <td>57 (14.3%)</td>
                    <td>$6.55M</td>
                    <td>$114,887</td>
                    <td class="warning-cell">6.0%</td>
                    <td class="warning-cell">6.0%</td>
                </tr>
                <tr>
                    <td>&#8805; 10.00%</td>
                    <td>28 (7.0%)</td>
                    <td>$3.00M</td>
                    <td>$107,029</td>
                    <td class="danger-cell">20.3%</td>
                    <td class="danger-cell">17.6%</td>
                </tr>
            </table>
            <div class="callout danger">
                &#x1F534; &#8805;10% rate loans: 7% of portfolio but 20.3% DQ30+ &#8212; ~5x higher risk
            </div>
        </div>

        <!-- Weighted Averages -->
        <div class="card highlight">
            <div class="section-header">
                <span class="section-header-icon">&#x2696;&#xFE0F;</span>
                <span class="section-header-title">Portfolio Profile</span>
            </div>
            <div class="metric-grid">
                <div class="metric-item">
                    <div class="metric-label">WAC Rate<br>(Wtd Avg Coupon)</div>
                    <div class="metric-value">8.74%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">WALA<br>(Wtd Avg Loan Age)</div>
                    <div class="metric-value">11.2 mo</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">WARM<br>(Wtd Avg Rem Term)</div>
                    <div class="metric-value">290 mo</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Avg DTI<br>(Debt-to-Income)</div>
                    <div class="metric-value">36.6%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Avg FICO<br>(Credit Score)</div>
                    <div class="metric-value">720</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Avg LTV<br>(Loan-to-Value)</div>
                    <div class="metric-value">82.8%</div>
                </div>
            </div>
            <div class="callout success">
                &#x2705; All metrics within institutional guidelines &#8226; Net SFee: 30 bps
            </div>
        </div>
    </div>

    <!-- GEM: LTV × FICO Risk Map -->
    <div style="display: grid; grid-template-columns: 1fr; gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.35s both;">
        <div class="card highlight">
            <div class="section-header">
                <span class="section-header-icon">&#x1F5FA;&#xFE0F;</span>
                <span class="section-header-title">LTV &#215; FICO Risk Map &#8212; Quadrant Analysis</span>
            </div>
            <div class="risk-map-grid" style="display: grid; grid-template-columns: 1.6fr 1fr; gap: 16px; align-items: start;">
                <!-- Left: Table -->
                <div>
                    <table class="tier-table">
                        <tr>
                            <th>Quadrant</th>
                            <th>Criteria</th>
                            <th>Loans</th>
                            <th>% Portfolio</th>
                            <th>DQ30+ Rate</th>
                            <th>Share of All DQ</th>
                        </tr>
                        <tr>
                            <td><span style="color: #10B981; font-weight: 700;">&#x1F7E2; Fortress</span></td>
                            <td>LTV &#8804;85% + FICO 681+</td>
                            <td>165</td>
                            <td>40.7%</td>
                            <td class="highlight-cell">1.8%</td>
                            <td>15.8%</td>
                        </tr>
                        <tr>
                            <td><span style="color: #F59E0B; font-weight: 700;">&#x1F7E1; Moderate-A</span></td>
                            <td>LTV &#8804;85% + FICO &lt;681</td>
                            <td>52</td>
                            <td>12.8%</td>
                            <td>3.8%</td>
                            <td>10.5%</td>
                        </tr>
                        <tr>
                            <td><span style="color: #F59E0B; font-weight: 700;">&#x1F7E1; Moderate-B</span></td>
                            <td>LTV &gt;85% + FICO 681+</td>
                            <td>150</td>
                            <td>37.0%</td>
                            <td>4.0%</td>
                            <td>31.6%</td>
                        </tr>
                        <tr>
                            <td><span style="color: #EF4444; font-weight: 700;">&#x1F534; Elevated</span></td>
                            <td>LTV &gt;85% + FICO &lt;681</td>
                            <td>24</td>
                            <td class="danger-cell">5.9%</td>
                            <td class="danger-cell">33.3%</td>
                            <td class="danger-cell">42.1%</td>
                        </tr>
                    </table>
                </div>
                <!-- Right: Key Stats -->
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <div class="stat-highlight" style="border-left: 3px solid #10B981;">
                        <div class="stat-big" style="color: #10B981; font-size: 22px;">18x</div>
                        <div class="stat-desc">
                            <strong>DQ Separation</strong><br>
                            Elevated zone (33.3%) vs. Fortress zone (1.8%)
                        </div>
                    </div>
                    <div class="stat-highlight" style="border-left: 3px solid #F59E0B;">
                        <div class="stat-big" style="color: #F59E0B; font-size: 22px;">78%</div>
                        <div class="stat-desc">
                            <strong>Sub-4% DQ Zones</strong><br>
                            Fortress + Moderate-A/B combined
                        </div>
                    </div>
                    <div class="stat-highlight" style="border-left: 3px solid #EF4444;">
                        <div class="stat-big" style="color: #EF4444; font-size: 22px;">$2.7M</div>
                        <div class="stat-desc">
                            <strong>Elevated Zone UPB</strong><br>
                            5.2% of portfolio &#8212; containable exposure
                        </div>
                    </div>
                </div>
            </div>
            <div class="callout success" style="margin-top: 10px;">
                &#x1F6E1;&#xFE0F; <strong>Fortress zone</strong> (165 loans, $20.2M UPB) runs at <strong>1.8% DQ30+</strong> &#8212; near-prime credit performance. 78% of the portfolio sits in zones with sub-4% DQ rates.
            </div>
            <div class="callout danger" style="margin-top: 4px;">
                &#x1F6A8; Just <strong>24 loans (5.9%)</strong> generate <strong>42% of all delinquency</strong> at a 33.3% DQ rate. Risk is not diffuse &#8212; it is surgically identifiable in one small, containable pocket.
            </div>
        </div>
    </div>

    </div><!-- /section: segmentation -->

    <div class="feb-section" data-section="performance">
    <!-- Grid Row 3: Vintage Performance + Watch + Strengths -->
    <div class="grid-row-3">
        <!-- Vintage DQ Chart -->
        <div class="card premium">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C5;</span>
                <span class="section-header-title">Origination Vintage &#8212; DQ30+ and DQ60+ Rates</span>
            </div>
            <div class="chart-140">
                <canvas id="vintageChart"></canvas>
                <div class="chart-annotations">
                    <span class="chart-anno-tag slate" style="top: 8%; left: 38%;">Peak: 85 loans</span>
                    <span class="chart-anno-tag red" style="top: 32%; left: 4%;">Most seasoned</span>
                    <span class="chart-anno-tag green" style="top: 8%; right: 4%;">Recent: 0% DQ</span>
                </div>
            </div>
            <div class="chart-legend">
                <span>&#x1F535; Loan Count</span>
                <span>&#x1F7E0; DQ30-59 Rate (%)</span>
                <span>&#x1F534; DQ60+ Rate (%)</span>
            </div>
            <div style="font-size: 8px; color: #64748B; margin-top: 4px; text-align: center;">
                Nov 2024 vintage (24 loans) shows 12% DQ30+ &#8212; most seasoned cohort
            </div>
        </div>

        <!-- Watch Items -->
        <div class="card watch">
            <div class="section-header">
                <span class="section-header-icon">&#x1F534;</span>
                <span class="section-header-title">Watch Items</span>
            </div>
            <div class="insight-list">
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>DQ60+ at 3.39%</strong> &#8212; down from 3.66% at Jan EOM; 8 loans now in 60-89 DPD</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>5 demanded loans ($569K UPB)</strong> &#8212; down from 7 in Jan, representing 1.21% of portfolio</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>Tier 2 &amp; Tier 3 concentration:</strong> 19% of loans but 9.9% and 15.1% DQ30+ respectively</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>&#8805;10% rate loans</strong> show 20.3% DQ30+ vs &#8804;4.3% in core bands</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>Nov '24 vintage</strong> &#8212; 12.0% DQ30+ (most seasoned cohort)</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>9 loans at 120+ DPD ($1.15M UPB)</strong> &#8212; repo/foreclosure pipeline unchanged</span></div>
            </div>
        </div>

        <!-- Strengths -->
        <div class="card strength">
            <div class="section-header">
                <span class="section-header-icon">&#x1F7E2;</span>
                <span class="section-header-title">Strengths</span>
            </div>
            <div class="insight-list">
                <div class="insight-item"><span>&#x2705;</span><span><strong>DQ30+ plunged to 3.87%</strong> &#8212; down from 6.34% Jan EOM &amp; 8.56% Dec YE</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>95.4% performing</strong> (394 of 413 loans) &#8212; up from 92.9% Jan</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>75 paid-ahead borrowers</strong> ($9.6M UPB, 18.5%) &#8212; strong engagement</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>720 avg FICO / 82.8% LTV / 36.6% DTI</strong> &#8212; solid credit fundamentals</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>Core rates (&lt; 9%)</strong> show &#8804;4.3% DQ30+ &#8212; well-controlled risk</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>14 new originations</strong> since Nov '25 &#8212; all performing, zero delinquency</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>74% of NPLs are TPB-originated</strong> &#8212; only 5 NPLs in PorchPass self-originated book</span></div>
            </div>
        </div>
    </div>

    <!-- Grid Row 4: DQ60+ Detail + Resolution + Executive Summary -->
    <div class="grid-row-4">
        <!-- DQ60+ Loan Detail -->
        <div class="card watch">
            <div class="section-header">
                <span class="section-header-icon">&#x1F6A8;</span>
                <span class="section-header-title">DQ60+ / NPL Breakdown</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>DPD Bucket</th>
                    <th>Count</th>
                    <th>UPB</th>
                    <th>% of Portfolio</th>
                </tr>
                <tr>
                    <td>60-89 DPD</td>
                    <td class="warning-cell">8</td>
                    <td>$826,653</td>
                    <td>1.94%</td>
                </tr>
                <tr>
                    <td>90-119 DPD</td>
                    <td class="highlight-cell">0</td>
                    <td class="highlight-cell">$0</td>
                    <td class="highlight-cell">0.00%</td>
                </tr>
                <tr>
                    <td style="color: #DC2626; font-weight: 700;">120+ DPD &#8212; NTV</td>
                    <td class="danger-cell">6</td>
                    <td>$646,386</td>
                    <td>1.45%</td>
                </tr>
                <tr>
                    <td style="color: #DC2626; font-weight: 700;">120+ DPD &#8212; Repo</td>
                    <td class="danger-cell">3</td>
                    <td>$507,803</td>
                    <td>0.73%</td>
                </tr>
                <tr style="border-top: 1px solid rgba(239,68,68,0.3);">
                    <td><strong>Total DQ60+</strong></td>
                    <td><strong style="color: #EF4444;">17</strong></td>
                    <td><strong>$1,980,842</strong></td>
                    <td><strong>4.12%</strong></td>
                </tr>
            </table>
            <div class="callout danger">
                &#x1F534; 120+ DPD = 9 of 17 total DQ60+ loans (6 NTV + 3 Repo) &#8226; 90-119 bucket cleared to zero &#8226; 3 Repo loans also shown in Repo KPI
            </div>
        </div>

        <!-- Resolution Forecast -->
        <div class="card premium">
            <div class="section-header">
                <span class="section-header-icon">&#x1F52E;</span>
                <span class="section-header-title">Resolution Outlook</span>
            </div>
            <div class="key-takeaways">
                <div class="takeaway-item" style="border-left: 3px solid #10B981;">
                    <div class="takeaway-content">
                        <strong style="color: #10B981;">Short-Term (30-60 days)</strong>
                        <span>DQ30+ dropped sharply (6.34% &#8594; 3.87%). Only 2 loans remain in 30-59 DPD &#8212; lowest since portfolio inception. Q1 tax refund season driving cures. Monitor 8 loans at 60-89 DPD for roll risk.</span>
                    </div>
                </div>
                <div class="takeaway-item" style="border-left: 3px solid #F59E0B;">
                    <div class="takeaway-content">
                        <strong style="color: #F59E0B;">Medium-Term (60-120 days)</strong>
                        <span>90-119 DPD bucket cleared to zero &#8212; a positive signal. 5 demanded loans ($569K) remain on the watchlist as a leading indicator. Continue active workout engagement on remaining demanded loans.</span>
                    </div>
                </div>
                <div class="takeaway-item" style="border-left: 3px solid #EF4444;">
                    <div class="takeaway-content">
                        <strong style="color: #EF4444;">Long-Term (120+ / Repos)</strong>
                        <span>9 loans at 120+ DPD ($1.15M UPB) &#8212; flat from Jan. Est. recovery 40-60% given chattel loan recovery rates. Potential loss exposure: $461K&#8211;$692K. 3 loans in active repo process ($508K UPB).</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4CB;</span>
                <span class="section-header-title">Executive Summary</span>
            </div>
            <div class="exec-summary">
                <p><strong>February 2026 MTD shows meaningful improvement in headline delinquency.</strong> The DQ30+ rate <span class="hl-green">declined sharply to 3.87%</span> from 6.34% in January &#8212; a 45% reduction and the lowest level since March 2025. With only 2 loans remaining in the 30-59 DPD bucket and the 90-119 DPD bucket clearing to zero, early-stage collections are demonstrably effective. However, DQ60+ <span class="hl-green">improved to 3.39%</span> (from 3.66%), reinforcing the positive collection trend.</p>
                <p><strong>Credit segmentation reveals persistent concentration risk in lower tiers.</strong> Tier 1 borrowers (83% of portfolio, 735 avg FICO) show a well-controlled 3.0% DQ30+ rate. Tier 2 (17%, 659 avg FICO) carries <span class="hl-amber">9.9% DQ30+</span> and Tier 3 (1.8%, 613 avg FICO) shows <span class="hl-red">15.1% DQ30+</span>. The &#8805;10% rate band maintains 20.3% DQ30+ &#8212; nearly 5x the core rate. These segments warrant tighter monitoring and selective underwriting recalibration.</p>
                <p><strong>The demanded loan count has stabilized.</strong> 5 demanded loans ($569K UPB, 1.10%) are down from 7 in January &#8212; a positive trend. The combination of the cleared 90-119 bucket and 9 unchanged 120+ DPD loans ($1.15M) suggests the portfolio is bifurcating: performing loans are curing, while a small number of distressed loans remain concentrated. Loss exposure on 120+ DPD loans ranges from <span class="hl-red">$461K&#8211;$692K</span> at 40-60% chattel recovery.</p>
                <p><strong>Positive indicators outweigh near-term risks:</strong> <span class="hl-green">95.4% performing rate</span> (up from 92.9%), 75 paid-ahead borrowers ($9.6M UPB), and strong credit fundamentals (720 FICO, 82.8% LTV, 36.6% DTI). The sharp DQ30+ improvement likely reflects seasonal Q1 tax refund cures. 14 new originations since Nov '25 are all performing. <span class="hl-green">Expect continued positive momentum through March</span>, though the elevated demanded count warrants close monitoring as a leading indicator.</p>
                <p><strong>A critical origination attribution finding has been identified.</strong> 17 loans in the portfolio were not underwritten and originated by PorchPass, but rather originated via <span class="hl-amber">TransPecos Bank (TPB)</span> underwriting &amp; docs. These TPB-affiliated loans account for <span class="hl-red">74% of all NPLs</span>, 87.5% of DQ30+, and 92.9% of DQ60+ loans. Excluding TPB-originated loans, <span class="hl-green">PorchPass&#8217;s self-originated book carries only 5 NPLs</span> &#8212; materially reframing the portfolio&#8217;s credit quality narrative.</p>
            </div>
        </div>
    </div>
    </div><!-- /section: performance -->

    <div class="feb-section" data-section="intelligence">
    <!-- Section Divider: Advanced Intelligence -->
    <div class="section-divider">Advanced Portfolio Intelligence</div>

    <!-- Grid Row 5: MSA Concentration + Dealer DQ + Cure Cascade -->
    <div class="grid-row-5">

        <!-- MSA DQ Concentration -->
        <div class="card highlight">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4CD;</span>
                <span class="section-header-title">DQ Concentration by MSA</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>MSA / Region</th>
                    <th>Loans</th>
                    <th>DQ30+</th>
                    <th class="th-tooltip">DQ Rate
                        <div class="th-tooltip-content"><strong>DQ Rate</strong> = MSA DQ30+ count / MSA total loans<br>Count-based delinquency rate within each region</div>
                    </th>
                </tr>
                <tr>
                    <td>Houston Metro</td>
                    <td>75 (18.5%)</td>
                    <td class="warning-cell">4</td>
                    <td class="warning-cell">5.3%</td>
                </tr>
                <tr>
                    <td><strong style="color: #EF4444;">East TX &#8212; Lufkin</strong></td>
                    <td>22 (5.4%)</td>
                    <td class="danger-cell">3</td>
                    <td class="danger-cell">13.6%</td>
                </tr>
                <tr>
                    <td>San Antonio-NB</td>
                    <td>65 (16.0%)</td>
                    <td>2</td>
                    <td>3.1%</td>
                </tr>
                <tr>
                    <td>Midland-Odessa</td>
                    <td>26 (6.4%)</td>
                    <td class="warning-cell">2</td>
                    <td class="warning-cell">7.7%</td>
                </tr>
                <tr>
                    <td><strong style="color: #F59E0B;">East TX &#8212; Tyler</strong></td>
                    <td>25 (6.2%)</td>
                    <td class="warning-cell">2</td>
                    <td class="warning-cell">8.0%</td>
                </tr>
            </table>
            <div class="callout danger" style="margin-top: 8px;">
                &#x1F6A8; <strong>East TX Rural Corridor</strong> (Tyler + Lufkin): 11.6% of portfolio but 26% of all DQ30+ loans. DQ rate <strong>2.7x higher</strong> than rest of book.
            </div>
            <div class="callout success" style="margin-top: 4px;">
                &#x2705; Excluding East TX corridor, the remaining <strong>88.4% of the portfolio runs at just 3.9% DQ30+</strong> &#8212; well within institutional targets.
            </div>
        </div>

        <!-- Dealer DQ Concentration -->
        <div class="card highlight">
            <div class="section-header">
                <span class="section-header-icon">&#x1F3ED;</span>
                <span class="section-header-title">DQ Concentration by Dealer</span>
            </div>
            <table class="tier-table">
                <tr>
                    <th>Dealer</th>
                    <th>Loans</th>
                    <th>DQ30+</th>
                    <th class="th-tooltip">DQ Rate
                        <div class="th-tooltip-content"><strong>DQ Rate</strong> = Dealer DQ30+ count / Dealer total loans<br>Count-based delinquency rate by originating dealer</div>
                    </th>
                </tr>
                <tr>
                    <td>Palm Harbor Villages</td>
                    <td>78</td>
                    <td>2</td>
                    <td class="highlight-cell">2.6%</td>
                </tr>
                <tr>
                    <td><strong style="color: #EF4444;">Tandem Mobile Homes</strong></td>
                    <td>7</td>
                    <td class="danger-cell">2</td>
                    <td class="danger-cell">28.6%</td>
                </tr>
                <tr>
                    <td>Titan Factory Direct</td>
                    <td>18</td>
                    <td>1</td>
                    <td>5.6%</td>
                </tr>
                <tr>
                    <td>Oak Creek Home Center</td>
                    <td>12</td>
                    <td>1</td>
                    <td class="warning-cell">8.3%</td>
                </tr>
                <tr>
                    <td>Texas Built Mobile Homes</td>
                    <td>10</td>
                    <td>1</td>
                    <td class="warning-cell">10.0%</td>
                </tr>
            </table>
            <div class="callout warning" style="margin-top: 8px;">
                &#x26A0;&#xFE0F; <strong>Tandem Mobile Homes:</strong> 28.6% DQ rate on 7 loans (2 DQ30+, including 1 Repo at $249,713 UPB). Small sample but elevated. Both DQ loans are in the East TX corridor.
            </div>
            <div class="callout info" style="margin-top: 4px;">
                &#x1F4A1; <strong>Palm Harbor Villages</strong> (largest dealer, 78 loans) holds steady at 2.6% DQ &#8212; strong dealer performance at scale.
            </div>
        </div>

        <!-- Cure Cascade / Roll Rate -->
        <div class="card premium">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C8;</span>
                <span class="section-header-title">DQ Bucket Migration: Jan &#8594; Feb</span>
            </div>
            <!-- Roll Rate Table -->
            <div class="roll-row" style="border-bottom: 1px solid rgba(148,163,184,0.2); padding-bottom: 6px; margin-bottom: 4px;">
                <div class="roll-header">DPD Bucket</div>
                <div class="roll-header" style="text-align:center;">Jan EOM</div>
                <div class="roll-header" style="text-align:center;">Feb MTD</div>
                <div class="roll-header" style="text-align:center;">Change</div>
                <div class="roll-header" style="text-align:right;">Signal</div>
            </div>
            <div class="roll-row">
                <div class="roll-bucket" style="color: #10B981;">Current (0 DPD)</div>
                <div class="roll-val">345</div>
                <div class="roll-val" style="color: #F8FAFC; font-weight: 700;">352</div>
                <div class="roll-change" style="color: #10B981;">+7</div>
                <div class="roll-signal" style="color: #10B981;">&#9650; Improving</div>
            </div>
            <div class="roll-row">
                <div class="roll-bucket">1-29 DPD</div>
                <div class="roll-val">28</div>
                <div class="roll-val">34</div>
                <div class="roll-change" style="color: #F59E0B;">+6</div>
                <div class="roll-signal" style="color: #F59E0B;">&#9654; Monitor</div>
            </div>
            <div class="roll-row" style="background: rgba(16, 185, 129, 0.06); border-radius: 4px;">
                <div class="roll-bucket" style="color: #10B981;">&#x2B50; 30-59 DPD</div>
                <div class="roll-val">11</div>
                <div class="roll-val" style="color: #10B981; font-weight: 700;">2</div>
                <div class="roll-change" style="color: #10B981; font-size: 11px;">&#8722;9</div>
                <div class="roll-signal" style="color: #10B981; font-weight: 700;">&#9650; 82% Cured</div>
            </div>
            <div class="roll-row">
                <div class="roll-bucket">60-89 DPD</div>
                <div class="roll-val">6</div>
                <div class="roll-val">8</div>
                <div class="roll-change" style="color: #EF4444;">+2</div>
                <div class="roll-signal" style="color: #F59E0B;">~2 rolled fwd</div>
            </div>
            <div class="roll-row" style="background: rgba(16, 185, 129, 0.06); border-radius: 4px;">
                <div class="roll-bucket" style="color: #10B981;">90-119 DPD</div>
                <div class="roll-val">3</div>
                <div class="roll-val" style="color: #10B981; font-weight: 700;">0</div>
                <div class="roll-change" style="color: #10B981;">&#8722;3</div>
                <div class="roll-signal" style="color: #10B981; font-weight: 700;">&#9650; Cleared</div>
            </div>
            <div class="roll-row">
                <div class="roll-bucket" style="color: #DC2626;">120+ DPD</div>
                <div class="roll-val">9</div>
                <div class="roll-val">9</div>
                <div class="roll-change" style="color: #94A3B8;">0</div>
                <div class="roll-signal" style="color: #94A3B8;">&#8212; Stable</div>
            </div>

            <!-- Cure Rate Highlight -->
            <div style="margin-top: 12px; padding: 10px 12px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(16, 185, 129, 0.03)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 10px;">
                <div style="font-size: 10px; font-weight: 800; color: #10B981; margin-bottom: 4px;">&#x1F4A1; Cure Cascade Insight</div>
                <div style="font-size: 9px; color: #CBD5E1; line-height: 1.5;">
                    The 30-59 DPD bucket <strong style="color: #10B981;">collapsed 82%</strong> (11 &#8594; 2 loans). Only ~2 rolled forward to 60-89. An estimated <strong style="color: #10B981;">~7 loans cured</strong> back to performing within one reporting period.
                </div>
                <div style="display: flex; gap: 16px; margin-top: 8px;">
                    <div style="text-align: center;">
                        <div style="font-size: 20px; font-weight: 800; color: #10B981;">~64%</div>
                        <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px;">Est. Cure Rate</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 20px; font-weight: 800; color: #10B981;">0</div>
                        <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px;">90-119 Bucket</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 20px; font-weight: 800; color: #F8FAFC;">+7</div>
                        <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px;">Net Current Gain</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Grid Row 6: Loss Severity + Board Talking Points -->
    <div class="grid-row-6">

        <!-- Loss Severity & Recovery -->
        <div class="card watch">
            <div class="section-header">
                <span class="section-header-icon">&#x1F6E1;&#xFE0F;</span>
                <span class="section-header-title">Loss Severity &#8212; 120+ DPD Recovery Analysis</span>
            </div>
            <div style="font-size: 9px; color: #94A3B8; margin-bottom: 8px;">
                9 loans at 120+ DPD ($1.15M UPB) &#8226; All in active workout (6 NTV, 3 Repo) &#8226; Recovery modeled at 65% of collateral value
            </div>
            <!-- Severity Summary -->
            <div class="mobile-stat-grid-4" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px;">
                <div style="background: rgba(15,23,42,0.6); padding: 8px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.3px;">120+ UPB</div>
                    <div style="font-size: 16px; font-weight: 800; color: #EF4444;">$1.15M</div>
                    <div style="font-size: 7px; color: #64748B;">2.23% of portfolio</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 8px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.3px;">Collateral Value</div>
                    <div style="font-size: 16px; font-weight: 800; color: #F59E0B;">$1.16M</div>
                    <div style="font-size: 7px; color: #64748B;">99.7% wtd LTV</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 8px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.3px;">Est. Recovery (65%)</div>
                    <div style="font-size: 16px; font-weight: 800; color: #10B981;">$752K</div>
                    <div style="font-size: 7px; color: #64748B;">MH liquidation basis</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 8px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.3px;">Max Net Loss</div>
                    <div style="font-size: 16px; font-weight: 800; color: #DC2626;">$402K</div>
                    <div style="font-size: 7px; color: #64748B;">0.78% of portfolio</div>
                </div>
            </div>

            <!-- Loan-Level Severity -->
            <div style="font-size: 8px; font-weight: 700; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Loan-Level Detail (120+ DPD)</div>
            <div style="font-size: 8px;">
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 4px 0; border-bottom: 1px solid rgba(148,163,184,0.2); color: #64748B; font-weight: 600;">
                    <div>DPD</div><div>UPB</div><div>Comp Val</div><div>LTV</div><div>Status</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #CBD5E1;">
                    <div style="color: #EF4444; font-weight: 700;">318</div><div>$71,856</div><div>$71,926</div><div>99.9%</div><div>NTV</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #CBD5E1;">
                    <div style="color: #EF4444; font-weight: 700;">288</div><div>$105,963</div><div>$106,447</div><div>99.5%</div><div>Repo</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #CBD5E1;">
                    <div style="color: #EF4444; font-weight: 700;">274</div><div>$118,318</div><div>$118,404</div><div>99.9%</div><div>NTV</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #CBD5E1;">
                    <div style="color: #DC2626; font-weight: 700;">213</div><div>$249,713</div><div>$250,408</div><div>99.7%</div><div>Repo</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #CBD5E1;">
                    <div style="color: #DC2626; font-weight: 700;">196</div><div>$152,127</div><div>$152,127</div><div>100.0%</div><div>Repo</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #94A3B8;">
                    <div style="font-weight: 600;">151</div><div>$196,761</div><div>$197,686</div><div>99.5%</div><div>NTV</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #94A3B8;">
                    <div style="font-weight: 600;">135</div><div>$96,137</div><div>$96,260</div><div>99.9%</div><div>NTV</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; border-bottom: 1px solid rgba(148,163,184,0.04); color: #94A3B8;">
                    <div style="font-weight: 600;">121</div><div>$82,692</div><div>$83,170</div><div>99.4%</div><div>NTV</div>
                </div>
                <div class="mobile-loan-row" style="display: grid; grid-template-columns: 0.6fr 1fr 1fr 1fr 1.2fr; gap: 0; padding: 3px 0; color: #94A3B8;">
                    <div style="font-weight: 600;">121</div><div>$80,622</div><div>$80,858</div><div>99.7%</div><div>NTV</div>
                </div>
            </div>
            <div class="callout info" style="margin-top: 8px;">
                &#x1F4A1; Collateral values based on original appraisal/comp at origination. 65% liquidation recovery is conservative for manufactured housing chattel. Actual recovery may vary with time-on-market and condition.
            </div>
        </div>

        <!-- Key Portfolio Insights -->
        <div class="card board-narrative" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(16, 185, 129, 0.05)); border: 1px solid rgba(245, 158, 11, 0.25);">
            <div class="section-header">
                <span class="section-header-icon">&#x1F3C6;</span>
                <span class="section-header-title">Key Portfolio Insights</span>
            </div>

            <!-- Stat 1: Geographic Isolation -->
            <div class="stat-highlight" style="margin-bottom: 8px; border-left: 3px solid #F59E0B;">
                <div class="stat-big" style="color: #F59E0B;">2.7x</div>
                <div class="stat-desc">
                    <strong>Geographic Concentration, Not Systemic Credit Risk</strong><br>
                    East TX rural corridor (Tyler + Lufkin) runs 2.7x the DQ rate of the rest of the book. These 47 loans (11.6% of portfolio) account for 26% of all DQ30+ loans. The remaining 88.4% of the portfolio performs at <strong style="color: #10B981;">3.9% DQ30+</strong>.
                </div>
            </div>

            <!-- Stat 2: Cure Cascade -->
            <div class="stat-highlight" style="margin-bottom: 8px; border-left: 3px solid #10B981;">
                <div class="stat-big" style="color: #10B981;">82%</div>
                <div class="stat-desc">
                    <strong>Majority of Early-Stage Pipeline Successfully Cured</strong><br>
                    30-59 DPD bucket collapsed 82% in one period (11 &#8594; 2 loans). An estimated ~7 loans cured back to performing, delivering a <strong style="color: #10B981;">~64% single-period cure rate</strong>. The 90-119 DPD bucket cleared entirely to zero. The portfolio is not building a backlog.
                </div>
            </div>

            <!-- Stat 3: Loss Ceiling -->
            <div class="stat-highlight" style="margin-bottom: 8px; border-left: 3px solid #DC2626;">
                <div class="stat-big" style="color: #DC2626;">0.78%</div>
                <div class="stat-desc">
                    <strong>Projected Loss Exposure &#8212; Bear Case</strong><br>
                    Projected bear-case net loss of <strong style="color: #DC2626;">$402K</strong> (0.78% of $51.8M portfolio) on all 9 loans at 120+ DPD, at 65% MH liquidation recovery. This is <strong style="color: #10B981;">partially offset (mitigated) by $9.6M in Paid Ahead UPB</strong> (23.9x coverage ratio).
                </div>
            </div>

            <!-- Stat 4: TPB Origination Attribution -->
            <div class="stat-highlight" style="margin-bottom: 8px; border-left: 3px solid #60A5FA;">
                <div class="stat-big" style="color: #60A5FA;">74%</div>
                <div class="stat-desc">
                    <strong>Delinquency Attribution &#8212; TransPecos Bank (TPB) Originated Loans</strong><br>
                    17 loans in the Rogue Portfolio were not underwritten and originated by PorchPass, but rather originated via TransPecos Bank (TPB) underwriting &amp; docs. These 17 TPB-affiliated loans <strong style="color: #60A5FA;">account for 74% of all NPLs</strong> in the Rogue Portfolio. Of these 17 TPB loans: <strong style="color: #DC2626;">14 are NPLs</strong>, <strong style="color: #DC2626;">13 are DQ60+</strong>, <strong style="color: #DC2626;">6 are DQ120+</strong>, and <strong style="color: #DC2626;">2 are in Repo</strong>. TPB loans represent <strong style="color: #60A5FA;">87.5%</strong> of all DQ30+, <strong style="color: #60A5FA;">92.9%</strong> of all DQ60+, <strong style="color: #60A5FA;">66.7%</strong> of all DQ120+, and <strong style="color: #60A5FA;">66.7%</strong> of all Repo loans in the Rogue Portfolio. <strong style="color: #10B981;">Excluding TPB-originated loans, PorchPass has only 5 NPLs</strong> across its self-originated book.
                </div>
            </div>
        </div>
    </div>

    <!-- GEM: The "$111K Reality Check" -->
    <div style="display: grid; grid-template-columns: 1fr; gap: 14px; margin-bottom: 14px; animation: fadeInUp 0.6s ease-out 0.65s both;">
        <div class="card board-narrative" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(96, 165, 250, 0.04)); border: 1px solid rgba(16, 185, 129, 0.2);">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4B0;</span>
                <span class="section-header-title">The &#8220;$111K Reality Check&#8221; &#8212; Actual Dollars Past Due vs. Headline DQ</span>
            </div>
            <div style="font-size: 9px; color: #94A3B8; margin-bottom: 12px; line-height: 1.5;">
                The portfolio reports 19 DQ30+ loans and $2.17M in DQ UPB &#8212; standard institutional metrics &#8212; but <strong style="color: #F8FAFC;">how much money is actually past due right now?</strong>
            </div>
            <div class="mobile-stat-grid-4" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 12px;">
                <div style="background: rgba(15,23,42,0.6); padding: 12px 10px; border-radius: 10px; text-align: center; border: 1px solid rgba(16, 185, 129, 0.15);">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Actual Past-Due Balance</div>
                    <div style="font-size: 22px; font-weight: 800; color: #10B981;">$111K</div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">on $51.8M portfolio</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 12px 10px; border-radius: 10px; text-align: center; border: 1px solid rgba(16, 185, 129, 0.15);">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">% of Portfolio UPB</div>
                    <div style="font-size: 22px; font-weight: 800; color: #10B981;">0.21%</div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">21 basis points</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 12px 10px; border-radius: 10px; text-align: center; border: 1px solid rgba(96, 165, 250, 0.15);">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">&#8220;Fresh&#8221; 30&#8211;119 DPD Balance</div>
                    <div style="font-size: 22px; font-weight: 800; color: #60A5FA;">$27K</div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">early-stage past-due</div>
                </div>
                <div style="background: rgba(15,23,42,0.6); padding: 12px 10px; border-radius: 10px; text-align: center; border: 1px solid rgba(245, 158, 11, 0.15);">
                    <div style="font-size: 7px; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Cash Flow Regeneration</div>
                    <div style="font-size: 22px; font-weight: 800; color: #F59E0B;">8 days</div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">of P&amp;I to cover full DQ</div>
                </div>
            </div>
            <div class="mobile-stat-grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                <div class="stat-highlight" style="border-left: 3px solid #F59E0B;">
                    <div class="stat-big" style="color: #F59E0B; font-size: 20px;">76%</div>
                    <div class="stat-desc">
                        <strong>of $111K in Active Workout</strong><br>
                        $84K concentrated in 120+ DPD loans already in Repo or NTV status &#8212; actively being resolved
                    </div>
                </div>
                <div class="stat-highlight" style="border-left: 3px solid #10B981;">
                    <div class="stat-big" style="color: #10B981; font-size: 20px;">$414K</div>
                    <div class="stat-desc">
                        <strong>Monthly Performing P&amp;I</strong><br>
                        Portfolio regenerates the entire $111K delinquent balance in just over one week of cash flow
                    </div>
                </div>
            </div>
            <div class="callout success" style="margin-top: 4px;">
                &#x1F4A1; <strong>Reframing the risk:</strong> The portfolio does not have &#8220;19 delinquent loans.&#8221; It has <strong>$27K in early-stage past-due balances</strong> and <strong>$84K in loans already being actively resolved</strong> &#8212; all backed by $414K/month in performing cash flow.
            </div>
        </div>
    </div>

    </div><!-- /section: intelligence -->

    </div><!-- /feb-content -->

    <div id="jan-content" style="display:none;">

    <!-- KPI Strip -->
    <div class="kpi-strip" style="grid-template-columns: repeat(6, 1fr);">
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">DQ30+ = All loans 30+ days past due<br>26 loans with 30+ DPD<br>UPB: $3,252,836 (6.31% of total)</div>
            <div class="kpi-label">DQ30+ Rate</div>
            <div class="kpi-value" style="color: #F59E0B;">6.34%</div>
            <div class="kpi-sub warn">26 loans | $3.25M UPB</div>
            <div class="kpi-change down">&#9660; from 8.56% Dec</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">15 loans with 60+ DPD<br>Includes 60-89 DPD, 90-119, and 120+<br>UPB: $1,979,444 (3.84% of total)</div>
            <div class="kpi-label">DQ60+ Rate</div>
            <div class="kpi-value" style="color: #EF4444;">3.66%</div>
            <div class="kpi-sub negative">15 loans | $1.98M UPB</div>
            <div class="kpi-change up">&#9650; from 3.53% Dec</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Demanded loans<br>UPB: TBD</div>
            <div class="kpi-label">Demanded</div>
            <div class="kpi-value" style="color: #F97316;">7</div>
            <div class="kpi-sub warn">1.71% of loans | UPB TBD</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Notice to Vacate loans<br>UPB: TBD</div>
            <div class="kpi-label">Notice to Vacate</div>
            <div class="kpi-value" style="color: #F97316;">11</div>
            <div class="kpi-sub warn">2.68% of loans | UPB TBD</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Loans with 120+ days past due<br>Proxy for repos / foreclosures<br>UPB: $1,118,678 (2.17% of total)</div>
            <div class="kpi-label">Repo</div>
            <div class="kpi-value" style="color: #DC2626;">3</div>
            <div class="kpi-sub negative">0.73% of loans | $1.12M UPB</div>
        </div>
        <div class="kpi-card has-tooltip">
            <div class="kpi-tooltip">Performing = Paid Off + First Pmt Not Due + Current<br>381 of 410 total loans = 92.93%<br>UPB: $48,312,546 (93.69% of total)</div>
            <div class="kpi-label">Performing</div>
            <div class="kpi-value" style="color: #10B981;">92.9%</div>
            <div class="kpi-sub positive">381 loans | $48.3M UPB</div>
        </div>
    </div>

    <!-- Grid Row 1 -->
    <div class="grid-row-1">
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C9;</span>
                <span class="section-header-title">Delinquency Trend (Dec 2025 &#8594; Jan 2026)</span>
            </div>
            <div class="chart-140"><canvas id="janHistChart"></canvas></div>
            <div class="chart-legend">
                <span>&#x1F7E0; DQ30+ Rate</span>
                <span>&#x1F534; DQ60+ Rate</span>
                <span>&#x2B1B; 120+ DPD</span>
            </div>
        </div>
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4C6;</span>
                <span class="section-header-title">DPD Distribution &#8212; Jan 2026</span>
            </div>
            <div class="chart-140"><canvas id="janDpdChart"></canvas></div>
            <div class="dpd-legend">
                <div class="dpd-item"><span class="dpd-dot" style="background: #10B981;"></span>Current (345)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #84CC16;"></span>1-29 (28)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #F59E0B;"></span>30-59 (11)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #F97316;"></span>60-89 (6)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #EF4444;"></span>90-119 (3)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #DC2626;"></span>120+ (9)</div>
                <div class="dpd-item"><span class="dpd-dot" style="background: #64748B;"></span>Paid Off (8)</div>
            </div>
        </div>
        <div class="card">
            <div class="section-header">
                <span class="section-header-icon">&#x1F4CB;</span>
                <span class="section-header-title">Portfolio Status Breakdown</span>
            </div>
            <div style="font-size: 10px; display: flex; flex-direction: column; gap: 10px;">
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #10B981; font-weight: 700;">&#x2705; Performing</span>
                        <span style="color: #F8FAFC; font-weight: 700;">381 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 92.9%; background: linear-gradient(90deg, #10B981, #059669); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">92.93% &#8226; $48.3M UPB (93.7%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #F59E0B; font-weight: 700;">&#x1F7E7; Collections (DQ30)</span>
                        <span style="color: #F8FAFC; font-weight: 700;">11 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 2.7%; min-width: 8px; background: linear-gradient(90deg, #F59E0B, #D97706); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">2.68% &#8226; $1.27M UPB (2.5%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #EF4444; font-weight: 700;">&#x26D3; DQ60+ / NPL</span>
                        <span style="color: #F8FAFC; font-weight: 700;">18 loans</span>
                    </div>
                    <div style="background: rgba(15,23,42,0.6); border-radius: 6px; height: 10px; overflow: hidden;">
                        <div style="height: 100%; width: 4.4%; min-width: 8px; background: linear-gradient(90deg, #EF4444, #DC2626); border-radius: 6px;"></div>
                    </div>
                    <div style="font-size: 8px; color: #64748B; text-align: right; margin-top: 2px;">4.39% &#8226; $1.98M UPB (3.8%)</div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="color: #64748B; font-weight: 700;">&#x1F9FE; Paid Off</span>
                        <span style="color: #F8FAFC; font-weight: 700;">8 loans</span>
                    </div>
                    <div style="font-size: 8px; color: #64748B; margin-top: 2px;">1.95% &#8226; $0 UPB (included in Performing)</div>
                </div>
            </div>
            <div class="callout info" style="margin-top: 10px;">
                &#x1F4CC; Total: 410 loans &#8226; $51.57M UPB &#8226; Denominator = 410 for all rates
            </div>
        </div>
    </div>

    <div class="section-divider">Portfolio Segmentation &amp; Risk Analysis</div>

    <!-- Grid Row 2 -->
    <div class="grid-row-2">
        <div class="card highlight">
            <div class="section-header"><span class="section-header-icon">&#x1F3AF;</span><span class="section-header-title">Credit Tier Analysis</span></div>
            <table class="tier-table">
                <tr><th>Tier</th><th>Loans</th><th>UPB</th><th>Avg FICO</th><th>DQ30+ Ct</th><th>DQ30+ %</th><th>DQ60+ Ct</th><th>DQ60+ %</th></tr>
                <tr><td><strong>Tier 1 (681+)</strong></td><td>327 (79.8%)</td><td>$42.2M</td><td>736</td><td class="warning-cell">16</td><td class="warning-cell">3.90%</td><td class="warning-cell">10</td><td class="warning-cell">2.44%</td></tr>
                <tr><td><strong>Tier 2 (641-680)</strong></td><td>69 (16.8%)</td><td>$8.1M</td><td>659</td><td class="danger-cell">12</td><td class="danger-cell">2.93%</td><td class="danger-cell">7</td><td class="danger-cell">1.71%</td></tr>
                <tr><td><strong>Tier 3 (600-640)</strong></td><td>8 (2.0%)</td><td>$0.6M</td><td>616</td><td class="warning-cell">1</td><td>0.24%</td><td class="warning-cell">1</td><td>0.24%</td></tr>
                <tr><td style="color: #64748B;"><em>No Tier (new)</em></td><td style="color: #64748B;">6 (1.5%)</td><td style="color: #64748B;">$0.6M</td><td style="color: #64748B;">&#8212;</td><td class="highlight-cell">0</td><td class="highlight-cell">0.00%</td><td class="highlight-cell">0</td><td class="highlight-cell">0.00%</td></tr>
            </table>
            <div class="callout warning">&#x26A0;&#xFE0F; Tier 2 concentration: 17% of loans but 41% of DQ30+ count (12 of 29)</div>
        </div>
        <div class="card highlight">
            <div class="section-header"><span class="section-header-icon">&#x1F3E0;</span><span class="section-header-title">Land Type Distribution</span></div>
            <table class="tier-table">
                <tr><th>Land Type</th><th>Loans</th><th>DQ30+ Ct</th><th>DQ30+ %</th><th>DQ60+ Ct</th></tr>
                <tr><td>Customer Owned</td><td>156 (38%)</td><td class="warning-cell">12</td><td class="warning-cell">2.93%</td><td>8</td></tr>
                <tr><td>Private Not Owned</td><td>231 (56%)</td><td class="warning-cell">16</td><td class="warning-cell">3.90%</td><td>9</td></tr>
                <tr><td>Community</td><td>17 (4%)</td><td>1</td><td>0.24%</td><td>1</td></tr>
                <tr><td style="color: #64748B;"><em>Unknown (new)</em></td><td style="color: #64748B;">6 (1%)</td><td class="highlight-cell">0</td><td class="highlight-cell">0.00%</td><td class="highlight-cell">0</td></tr>
            </table>
            <div class="callout info">&#x1F4A1; Private Not Owned: 56% of loans, 55% of DQ30+ &#8212; proportional risk</div>
        </div>
        <div class="card highlight">
            <div class="section-header"><span class="section-header-icon">&#x1F4CA;</span><span class="section-header-title">Note Rate Bands</span></div>
            <table class="tier-table">
                <tr><th>Rate Band</th><th>Loans</th><th>Avg Loan</th><th>DQ30+ %</th><th>DQ60+ %</th></tr>
                <tr><td>&lt; 8.00%</td><td>21 (5.1%)</td><td>$126,885</td><td class="warning-cell">9.5%</td><td>4.8%</td></tr>
                <tr><td>8.00% &#8212; 8.49%</td><td>135 (32.9%)</td><td>$135,518</td><td>5.2%</td><td>3.7%</td></tr>
                <tr><td>8.50% &#8212; 8.99%</td><td>168 (41.0%)</td><td>$125,343</td><td class="highlight-cell">4.2%</td><td class="highlight-cell">2.4%</td></tr>
                <tr><td>9.00% &#8212; 9.99%</td><td>57 (13.9%)</td><td>$114,921</td><td class="warning-cell">12.3%</td><td class="warning-cell">7.0%</td></tr>
                <tr><td>&#8805; 10.00%</td><td>29 (7.1%)</td><td>$103,373</td><td class="danger-cell">20.7%</td><td class="danger-cell">13.8%</td></tr>
            </table>
            <div class="callout danger">&#x1F534; &#8805;10% rate loans: 7% of portfolio but 20.7% DQ30+ &#8212; 5x higher risk</div>
        </div>
        <div class="card highlight">
            <div class="section-header"><span class="section-header-icon">&#x2696;&#xFE0F;</span><span class="section-header-title">Portfolio Profile</span></div>
            <div class="metric-grid">
                <div class="metric-item"><div class="metric-label">WAC Rate<br>(Wtd Avg Coupon)</div><div class="metric-value">8.74%</div></div>
                <div class="metric-item"><div class="metric-label">WALA<br>(Wtd Avg Loan Age)</div><div class="metric-value">9.8 mo</div></div>
                <div class="metric-item"><div class="metric-label">WARM<br>(Wtd Avg Rem Term)</div><div class="metric-value">290 mo</div></div>
                <div class="metric-item"><div class="metric-label">Avg DTI<br>(Debt-to-Income)</div><div class="metric-value">36.6%</div></div>
                <div class="metric-item"><div class="metric-label">Avg FICO<br>(Credit Score)</div><div class="metric-value">721</div></div>
                <div class="metric-item"><div class="metric-label">Avg LTV<br>(Loan-to-Value)</div><div class="metric-value">82.6%</div></div>
            </div>
            <div class="callout success">&#x2705; All metrics within institutional guidelines</div>
        </div>
    </div>

    <!-- Grid Row 3 -->
    <div class="grid-row-3">
        <div class="card premium">
            <div class="section-header"><span class="section-header-icon">&#x1F4C5;</span><span class="section-header-title">Origination Vintage &#8212; DQ30+ Rate</span></div>
            <div class="chart-140"><canvas id="janVintageChart"></canvas></div>
            <div class="chart-legend"><span>&#x1F535; Loan Count</span><span>&#x1F7E0; DQ30+ Rate (%)</span></div>
            <div style="font-size: 8px; color: #64748B; margin-top: 4px; text-align: center;">Nov 2024 vintage (25 loans) shows 16% DQ30+ &#8212; earliest cohort, most seasoned</div>
        </div>
        <div class="card watch">
            <div class="section-header"><span class="section-header-icon">&#x1F534;</span><span class="section-header-title">Watch Items</span></div>
            <div class="insight-list">
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>DQ60+ rose to 4.39%</strong> &#8212; up from 3.53% at Dec YE</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>9 loans at 120+ DPD</strong> &#8212; repo/foreclosure pipeline</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>Tier 2 concentration:</strong> 17% of loans, 41% of DQ30+</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>&#8805;10% rate loans</strong> show 20.7% DQ30+ vs 4.2% core</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>Nov '24 vintage</strong> &#8212; 16% DQ30+ (most seasoned)</span></div>
                <div class="insight-item"><span>&#x26A0;&#xFE0F;</span><span><strong>Mar/Jun '25 vintages</strong> &#8212; 10.9% and 11.1% DQ30+</span></div>
            </div>
        </div>
        <div class="card strength">
            <div class="section-header"><span class="section-header-icon">&#x1F7E2;</span><span class="section-header-title">Strengths</span></div>
            <div class="insight-list">
                <div class="insight-item"><span>&#x2705;</span><span><strong>92.9% performing</strong> (381 of 410 loans)</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>DQ30+ improved to 6.34%</strong> &#8212; down from 8.56% Dec YE</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>721 avg FICO / 82.6% LTV</strong> &#8212; strong credit</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>Core rates (8-9%)</strong> show &#8804;5.2% DQ30+</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>Dec/Jul/Nov-Jan vintages</strong> &#8212; 0-3% DQ30+</span></div>
                <div class="insight-item"><span>&#x2705;</span><span><strong>12 new originations</strong> since Nov '25 &#8212; all performing</span></div>
            </div>
        </div>
    </div>

    <!-- Grid Row 4 -->
    <div class="grid-row-4">
        <div class="card watch">
            <div class="section-header"><span class="section-header-icon">&#x1F6A8;</span><span class="section-header-title">DQ60+ / NPL Breakdown</span></div>
            <table class="tier-table">
                <tr><th>DPD Bucket</th><th>Count</th><th>UPB</th><th>% of Portfolio</th></tr>
                <tr><td>60-89 DPD</td><td class="warning-cell">6</td><td>$614,985</td><td>1.46%</td></tr>
                <tr><td>90-119 DPD</td><td class="danger-cell">3</td><td>$245,781</td><td>0.73%</td></tr>
                <tr><td style="color: #DC2626; font-weight: 700;">120+ DPD (Repos)</td><td class="danger-cell">9</td><td>$1,118,678</td><td>2.20%</td></tr>
                <tr style="border-top: 1px solid rgba(239,68,68,0.3);"><td><strong>Total NPL</strong></td><td><strong style="color: #EF4444;">18</strong></td><td><strong>$1,979,444</strong></td><td><strong>4.39%</strong></td></tr>
            </table>
            <div class="callout danger">&#x1F534; 120+ DPD loans = 50% of NPL count and 56.5% of NPL UPB</div>
        </div>
        <div class="card premium">
            <div class="section-header"><span class="section-header-icon">&#x1F52E;</span><span class="section-header-title">Resolution Outlook</span></div>
            <div class="key-takeaways">
                <div class="takeaway-item" style="border-left: 3px solid #10B981;">
                    <div class="takeaway-content"><strong style="color: #10B981;">Short-Term (30-60 days)</strong><span>DQ30+ improved MoM (8.56% &#8594; 6.34%). Expect 3-5 of 11 Collections loans to cure in Feb. Monitor 6 loans at 60-89 DPD for roll risk.</span></div>
                </div>
                <div class="takeaway-item" style="border-left: 3px solid #F59E0B;">
                    <div class="takeaway-content"><strong style="color: #F59E0B;">Medium-Term (60-120 days)</strong><span>3 loans in 90-119 DPD bucket will either cure or roll to 120+. Watch for seasonal tax refund cures in Q1. Tier 2 remediation plan needed.</span></div>
                </div>
                <div class="takeaway-item" style="border-left: 3px solid #EF4444;">
                    <div class="takeaway-content"><strong style="color: #EF4444;">Long-Term (120+ / Repos)</strong><span>9 loans at 120+ DPD ($1.12M UPB). Est. recovery 40-60% given chattel loan recovery rates. Potential loss exposure: $447K&#8211;$671K.</span></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="section-header"><span class="section-header-icon">&#x1F4CB;</span><span class="section-header-title">Executive Summary</span></div>
            <div class="exec-summary">
                <p><strong>January 2026 shows mixed signals.</strong> The headline DQ30+ rate <span class="hl-green">improved to 7.07%</span> from December's 8.56% &#8212; a welcome reversal after the year-end spike. However, DQ60+ <span class="hl-red">rose to 4.39%</span> (from 3.53%), driven by loans rolling from the 30-59 bucket into deeper delinquency.</p>
                <p><strong>Credit segmentation reveals concentration risk:</strong> Tier 2 loans (17% of portfolio) account for 41% of DQ30+ and 39% of DQ60+. High-rate loans (&#8805;10%) show 5x the DQ rate of the core 8.50-8.99% band. These two segments merit tighter monitoring and possible underwriting recalibration.</p>
                <p><strong>The 120+ DPD bucket (9 loans, $1.12M)</strong> represents the most urgent action item. These loans are likely in various stages of repossession/workout. Assuming 40-60% chattel recovery rates, loss exposure ranges from <span class="hl-red">$447K&#8211;$671K</span>.</p>
                <p><strong>Positive indicators:</strong> 92.9% performing rate, 12 new originations since Nov '25 all performing, and a solid credit foundation (721 FICO, 82.6% LTV). The DQ30+ improvement suggests December's spike was partially seasonal. <span class="hl-green">Expect continued normalization through Q1 2026.</span></p>
            </div>
        </div>
    </div>

    </div><!-- /jan-content -->

    <!-- ================================================================
         FEATURE #4: Comparison Split-Screen View
         ================================================================ -->
    <div id="compare-content" style="display:none;">
        <div class="compare-wrapper">
            <div class="compare-title">January 2026 EOM <span>&#x2192;</span> February 2026 MTD</div>

            <!-- KPI Comparison Grid -->
            <div class="compare-kpi-grid">
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">DQ30+ Rate</div>
                    <div class="compare-row">
                        <div class="compare-val jan">6.34%</div>
                        <div class="compare-arrow improved">&#x2192;</div>
                        <div class="compare-val feb" style="color: #10B981;">3.87%</div>
                    </div>
                    <div class="compare-delta" style="color: #10B981;">&#x2193; 2.47pp (&#8722;39%)</div>
                </div>
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">DQ60+ Rate</div>
                    <div class="compare-row">
                        <div class="compare-val jan">3.66%</div>
                        <div class="compare-arrow improved">&#x2192;</div>
                        <div class="compare-val feb" style="color: #10B981;">3.39%</div>
                    </div>
                    <div class="compare-delta" style="color: #10B981;">&#x2193; 0.27pp (&#8722;7.4%)</div>
                </div>
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">Demanded</div>
                    <div class="compare-row">
                        <div class="compare-val jan">7</div>
                        <div class="compare-arrow improved">&#x2192;</div>
                        <div class="compare-val feb" style="color: #10B981;">5</div>
                    </div>
                    <div class="compare-delta" style="color: #10B981;">&#x2193; 2 loans (&#8722;29%)</div>
                </div>
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">Notice to Vacate</div>
                    <div class="compare-row">
                        <div class="compare-val jan">11</div>
                        <div class="compare-arrow improved">&#x2192;</div>
                        <div class="compare-val feb" style="color: #10B981;">9</div>
                    </div>
                    <div class="compare-delta" style="color: #10B981;">&#x2193; 2 loans (&#8722;18%)</div>
                </div>
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">Repo</div>
                    <div class="compare-row">
                        <div class="compare-val jan">3</div>
                        <div class="compare-arrow flat">&#x2192;</div>
                        <div class="compare-val feb">3</div>
                    </div>
                    <div class="compare-delta" style="color: #64748B;">&#8212; Flat</div>
                </div>
                <div class="compare-kpi-card">
                    <div class="compare-kpi-label">Performing Rate</div>
                    <div class="compare-row">
                        <div class="compare-val jan">92.9%</div>
                        <div class="compare-arrow improved">&#x2192;</div>
                        <div class="compare-val feb" style="color: #10B981;">95.4%</div>
                    </div>
                    <div class="compare-delta" style="color: #10B981;">&#x2191; 2.5pp (+2.7%)</div>
                </div>
            </div>

            <!-- Side-by-side DPD Doughnuts -->
            <div class="compare-charts-grid">
                <div class="compare-chart-card">
                    <div class="compare-chart-label">January 2026 EOM &#8226; 410 Loans</div>
                    <div class="compare-chart-wrap"><canvas id="compareDpdJan"></canvas></div>
                </div>
                <div class="compare-chart-card">
                    <div class="compare-chart-label">February 2026 MTD &#8226; 413 Loans</div>
                    <div class="compare-chart-wrap"><canvas id="compareDpdFeb"></canvas></div>
                </div>
            </div>

            <!-- DPD Bucket Comparison with Bars -->
            <div class="compare-bucket-card">
                <div class="compare-bucket-title">DPD Bucket Migration &#8212; Loan Count Comparison</div>
                <div class="compare-bucket-grid">
                    <div class="compare-bucket-row header-row">
                        <div>Bucket</div><div style="text-align:right;">Jan</div><div style="text-align:right;">Jan</div><div></div><div>Feb</div><div>Feb</div><div style="text-align:right;">&#916;</div>
                    </div>
                    <div class="compare-bucket-row"><div style="color:#10B981;font-weight:700;">Current</div><div style="text-align:right;color:#94A3B8;">345</div><div style="text-align:right;"><div class="compare-bar" style="width:98%;background:#10B981;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:100%;background:#10B981;"></div></div><div>352</div><div style="text-align:right;color:#10B981;font-weight:700;">+7</div></div>
                    <div class="compare-bucket-row"><div style="color:#84CC16;font-weight:700;">1-29 DPD</div><div style="text-align:right;color:#94A3B8;">28</div><div style="text-align:right;"><div class="compare-bar" style="width:82%;background:#84CC16;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:100%;background:#84CC16;"></div></div><div>34</div><div style="text-align:right;color:#F59E0B;font-weight:700;">+6</div></div>
                    <div class="compare-bucket-row"><div style="color:#F59E0B;font-weight:700;">30-59 DPD</div><div style="text-align:right;color:#94A3B8;">11</div><div style="text-align:right;"><div class="compare-bar" style="width:100%;background:#F59E0B;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:18%;background:#F59E0B;"></div></div><div>2</div><div style="text-align:right;color:#10B981;font-weight:700;">&#8722;9</div></div>
                    <div class="compare-bucket-row"><div style="color:#F97316;font-weight:700;">60-89 DPD</div><div style="text-align:right;color:#94A3B8;">6</div><div style="text-align:right;"><div class="compare-bar" style="width:75%;background:#F97316;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:100%;background:#F97316;"></div></div><div>8</div><div style="text-align:right;color:#EF4444;font-weight:700;">+2</div></div>
                    <div class="compare-bucket-row"><div style="color:#EF4444;font-weight:700;">90-119 DPD</div><div style="text-align:right;color:#94A3B8;">3</div><div style="text-align:right;"><div class="compare-bar" style="width:100%;background:#EF4444;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:0%;background:#EF4444;min-width:0;"></div></div><div>0</div><div style="text-align:right;color:#10B981;font-weight:700;">&#8722;3</div></div>
                    <div class="compare-bucket-row"><div style="color:#DC2626;font-weight:700;">120+ DPD</div><div style="text-align:right;color:#94A3B8;">9</div><div style="text-align:right;"><div class="compare-bar" style="width:100%;background:#DC2626;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:100%;background:#DC2626;"></div></div><div>9</div><div style="text-align:right;color:#64748B;font-weight:700;">0</div></div>
                    <div class="compare-bucket-row"><div style="color:#64748B;font-weight:700;">Paid Off</div><div style="text-align:right;color:#94A3B8;">8</div><div style="text-align:right;"><div class="compare-bar" style="width:100%;background:#64748B;margin-left:auto;opacity:0.4;"></div></div><div style="text-align:center;color:#475569;">&#x2194;</div><div><div class="compare-bar" style="width:100%;background:#64748B;"></div></div><div>8</div><div style="text-align:right;color:#64748B;font-weight:700;">0</div></div>
                </div>
            </div>

            <!-- Summary -->
            <div class="compare-summary-card">
                <div class="headline">&#x2705; 5 of 6 KPIs Improved Month-over-Month</div>
                <div class="detail">
                    DQ30+ collapsed <strong>39%</strong> (6.34% &#x2192; 3.87%) &#8226;
                    30-59 DPD pipeline cleared <strong>82%</strong> (11 &#x2192; 2 loans) &#8226;
                    Performing rate climbed to <strong>95.4%</strong> &#8226;
                    90-119 DPD bucket fully cleared &#8226;
                    Repo stable at 3 loans &#8226;
                    Net <strong>+7 current loans</strong> gained
                </div>
            </div>
        </div>
    </div><!-- /compare-content -->

    <!-- FEATURE #7: Card Expand Modal -->
    <div class="modal-overlay" id="cardModal">
        <div class="modal-content-wrap">
            <button class="modal-close-btn" onclick="closeModal()">&#x2715;</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- FEATURE #3: Export Toast -->
    <div class="export-toast" id="exportToast">&#x2705; Print dialog opened &#8212; select "Save as PDF" to export</div>

    <!-- Footer -->
    <div class="footer">
        <div><strong>PorchPass, LLC</strong> &#8226; NMLS #2489505 &#8226; Manufactured Housing Finance &#8226; San Antonio, TX</div>
        <div style="display: flex; align-items: center; gap: 16px;">
            <span style="color: #475569; font-size: 8px;">&#x2139; = hover for details</span>
            <span>Confidential &nbsp;&#8226;&nbsp; Board &amp; Investor Distribution Only &#8226; Generated <span id="currentDate"></span></span>
        </div>
    </div>

    <!-- Scroll to Top -->
    <button class="scroll-top-btn" id="scrollTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="Back to top">&#x2191;</button>

    <!-- Body-level sparkline tooltip (must be before script) -->
    <div id="sparkFloat"></div>

    <script>
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

        Chart.defaults.color = '#94A3B8';
        Chart.defaults.font.family = "'DM Sans', sans-serif";
        Chart.defaults.font.size = 9;

        const tooltipStyle = {
            backgroundColor: 'rgba(30, 41, 59, 0.95)',
            borderColor: '#475569', borderWidth: 1,
            titleColor: '#F8FAFC', bodyColor: '#CBD5E1',
            padding: 12, cornerRadius: 8,
            titleFont: { size: 11, weight: 'bold' },
            bodyFont: { size: 10 }, displayColors: true, boxPadding: 4,
        };

        // ============================================================
        // 1. Historical DQ Chart (Dec 2025 â†’ Jan 2026 â†’ Feb 2026 MTD)
        // ============================================================
        const histCtx = document.getElementById('historicalDqChart').getContext('2d');
        const dqGrad = histCtx.createLinearGradient(0, 0, 0, 140);
        dqGrad.addColorStop(0, 'rgba(245, 158, 11, 0.5)');
        dqGrad.addColorStop(1, 'rgba(245, 158, 11, 0.02)');
        const dq60Grad = histCtx.createLinearGradient(0, 0, 0, 140);
        dq60Grad.addColorStop(0, 'rgba(239, 68, 68, 0.5)');
        dq60Grad.addColorStop(1, 'rgba(239, 68, 68, 0.02)');

        new Chart(histCtx, {
            type: 'line',
            data: {
                labels: ['Dec 2025 (YE)', 'Jan 2026 (EOM)', 'Feb 2026 (MTD)'],
                datasets: [
                    {
                        label: 'DQ30+ Rate',
                        data: [8.56, 7.07, 3.87],
                        borderColor: '#F59E0B', backgroundColor: dqGrad, fill: true,
                        tension: 0.4, borderWidth: 3,
                        pointRadius: 6, pointBackgroundColor: '#F59E0B',
                        pointBorderColor: '#1E293B', pointBorderWidth: 2,
                        pointHoverRadius: 8,
                    },
                    {
                        label: 'DQ60+ Rate',
                        data: [3.53, 4.39, 3.39],
                        borderColor: '#EF4444', backgroundColor: dq60Grad, fill: true,
                        tension: 0.4, borderWidth: 3,
                        pointRadius: 6, pointBackgroundColor: '#EF4444',
                        pointBorderColor: '#1E293B', pointBorderWidth: 2,
                        pointHoverRadius: 8,
                    },
                    {
                        label: '120+ DPD Rate',
                        data: [2.20, 2.20, 2.18],
                        borderColor: '#475569', backgroundColor: 'transparent', fill: false,
                        tension: 0.4, borderWidth: 2, borderDash: [5, 5],
                        pointRadius: 5, pointBackgroundColor: '#475569',
                        pointBorderColor: '#1E293B', pointBorderWidth: 2,
                    }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        ...tooltipStyle,
                        callbacks: {
                            label: (ctx) => ctx.dataset.label + ': ' + ctx.raw.toFixed(2) + '%'
                        }
                    },
                    annotation: {
                        annotations: {
                            dq30Target: {
                                type: 'line', yMin: 5, yMax: 5,
                                borderColor: 'rgba(16, 185, 129, 0.4)', borderWidth: 1, borderDash: [3, 3],
                                label: { display: true, content: 'Target 5%', position: 'end',
                                    font: { size: 8 }, color: '#10B981',
                                    backgroundColor: 'rgba(16, 185, 129, 0.1)', padding: 3 }
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { color: 'rgba(148,163,184,0.08)' }, ticks: { font: { size: 10, weight: 'bold' } } },
                    y: {
                        grid: { color: 'rgba(148,163,184,0.08)' },
                        min: 0, max: 12,
                        ticks: { callback: (v) => v + '%', font: { size: 9 } }
                    }
                }
            }
        });

        // ============================================================
        // 2. DPD Distribution Doughnut
        // ============================================================
        new Chart(document.getElementById('dpdChart').getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['Current (0 DPD)', '1-29 DPD', '30-59 DPD', '60-89 DPD', '90-119 DPD', '120+ DPD', 'Paid Off'],
                datasets: [{
                    data: [352, 34, 2, 8, 0, 9, 8],
                    backgroundColor: [
                        'rgba(16, 185, 129, 0.85)',
                        'rgba(132, 204, 22, 0.85)',
                        'rgba(245, 158, 11, 0.85)',
                        'rgba(249, 115, 22, 0.85)',
                        'rgba(239, 68, 68, 0.85)',
                        'rgba(220, 38, 38, 0.85)',
                        'rgba(100, 116, 139, 0.85)'
                    ],
                    hoverBackgroundColor: ['#10B981', '#84CC16', '#F59E0B', '#F97316', '#EF4444', '#DC2626', '#64748B'],
                    borderWidth: 0, hoverOffset: 6
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false, cutout: '58%',
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        ...tooltipStyle,
                        callbacks: {
                            label: (ctx) => {
                                const pct = ((ctx.raw / 413) * 100).toFixed(1);
                                return ctx.label + ': ' + ctx.raw + ' loans (' + pct + '%)';
                            }
                        }
                    }
                }
            }
        });

        // ============================================================
        // 3. Vintage DQ Chart
        // ============================================================
        const vintLabels = ['Nov 24', 'Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Nov 25', 'Dec 25', 'Jan 26', 'Feb 26'];
        const vintLoans = [24, 32, 51, 55, 63, 48, 85, 27, 6, 2, 4, 4, 4];
        const vintDQ30 = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.4, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0];
        const vintDQ60 = [12.0, 0.0, 1.9, 1.8, 7.8, 2.0, 3.5, 11.1, 0.0, 0.0, 0.0, 0.0, 0.0];

        new Chart(document.getElementById('vintageChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: vintLabels,
                datasets: [
                    {
                        label: 'Loan Count', data: vintLoans,
                        backgroundColor: 'rgba(96, 165, 250, 0.75)',
                        hoverBackgroundColor: '#60A5FA', borderRadius: 4, yAxisID: 'y',
                    },
                    {
                        label: 'DQ30-59 Rate', data: vintDQ30, type: 'line',
                        borderColor: '#F59E0B', backgroundColor: 'transparent',
                        tension: 0.4, borderWidth: 2.5,
                        pointRadius: 4, pointBackgroundColor: '#F59E0B',
                        pointHoverRadius: 6, pointHoverBorderColor: '#F8FAFC', pointHoverBorderWidth: 2,
                        yAxisID: 'y1',
                    },
                    {
                        label: 'DQ60+ Rate', data: vintDQ60, type: 'line',
                        borderColor: '#EF4444', backgroundColor: 'transparent',
                        tension: 0.4, borderWidth: 2.5,
                        pointRadius: 4, pointBackgroundColor: '#EF4444',
                        pointHoverRadius: 6, pointHoverBorderColor: '#F8FAFC', pointHoverBorderWidth: 2,
                        yAxisID: 'y1',
                    }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        ...tooltipStyle,
                        callbacks: {
                            label: (ctx) => {
                                if (ctx.dataset.label === 'Loan Count') return 'Originations: ' + ctx.raw + ' loans';
                                if (ctx.dataset.label === 'DQ30-59 Rate') return 'DQ30-59 Rate: ' + ctx.raw.toFixed(1) + '%';
                                return 'DQ60+ Rate: ' + ctx.raw.toFixed(1) + '%';
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { color: 'rgba(148,163,184,0.08)' }, ticks: { font: { size: 8 } } },
                    y: {
                        position: 'left', grid: { color: 'rgba(148,163,184,0.08)' },
                        ticks: { font: { size: 8 } }, min: 0, max: 100
                    },
                    y1: {
                        position: 'right', grid: { display: false },
                        ticks: { callback: (v) => v + '%', font: { size: 8 } },
                        min: 0, max: 20
                    }
                }
            }
        });

        // Period Toggle (visual only)
        // ============================================================
        // Jan Charts — lazy init on first toggle
        // ============================================================
        let janChartsInitialized = false;

        function initJanCharts() {
            if (janChartsInitialized) return;
            janChartsInitialized = true;

            // Jan Historical DQ Trend (Dec → Jan only)
            const janHistCtx = document.getElementById('janHistChart').getContext('2d');
            const janDq30Grad = janHistCtx.createLinearGradient(0, 0, 0, 140);
            janDq30Grad.addColorStop(0, 'rgba(245, 158, 11, 0.25)');
            janDq30Grad.addColorStop(1, 'rgba(245, 158, 11, 0)');
            const janDq60Grad = janHistCtx.createLinearGradient(0, 0, 0, 140);
            janDq60Grad.addColorStop(0, 'rgba(239, 68, 68, 0.2)');
            janDq60Grad.addColorStop(1, 'rgba(239, 68, 68, 0)');

            new Chart(janHistCtx, {
                type: 'line',
                data: {
                    labels: ['Dec 2025', 'Jan 2026'],
                    datasets: [
                        {
                            label: 'DQ30+ Rate',
                            data: [8.56, 7.07],
                            borderColor: '#F59E0B', backgroundColor: janDq30Grad, fill: true,
                            tension: 0.4, borderWidth: 3,
                            pointRadius: 6, pointBackgroundColor: '#F59E0B',
                            pointBorderColor: '#1E293B', pointBorderWidth: 2,
                        },
                        {
                            label: 'DQ60+ Rate',
                            data: [3.53, 4.39],
                            borderColor: '#EF4444', backgroundColor: janDq60Grad, fill: true,
                            tension: 0.4, borderWidth: 3,
                            pointRadius: 6, pointBackgroundColor: '#EF4444',
                            pointBorderColor: '#1E293B', pointBorderWidth: 2,
                        },
                        {
                            label: '120+ DPD Rate',
                            data: [2.20, 2.20],
                            borderColor: '#475569', backgroundColor: 'transparent', fill: false,
                            tension: 0.4, borderWidth: 2, borderDash: [5, 5],
                            pointRadius: 5, pointBackgroundColor: '#475569',
                            pointBorderColor: '#1E293B', pointBorderWidth: 2,
                        }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    interaction: { intersect: false, mode: 'index' },
                    plugins: {
                        legend: { display: false },
                        tooltip: { ...tooltipStyle, callbacks: { label: (ctx) => ctx.dataset.label + ': ' + ctx.raw.toFixed(2) + '%' } },
                        annotation: { annotations: { dq30Target: { type: 'line', yMin: 5, yMax: 5, borderColor: 'rgba(16, 185, 129, 0.4)', borderWidth: 1, borderDash: [3, 3], label: { display: true, content: 'Target 5%', position: 'end', font: { size: 8 }, color: '#10B981', backgroundColor: 'rgba(16, 185, 129, 0.1)', padding: 3 } } } }
                    },
                    scales: {
                        x: { grid: { color: 'rgba(148,163,184,0.08)' }, ticks: { font: { size: 10, weight: 'bold' } } },
                        y: { grid: { color: 'rgba(148,163,184,0.08)' }, min: 0, max: 12, ticks: { callback: (v) => v + '%', font: { size: 9 } } }
                    }
                }
            });

            // Jan DPD Doughnut
            new Chart(document.getElementById('janDpdChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Current (0 DPD)', '1-29 DPD', '30-59 DPD', '60-89 DPD', '90-119 DPD', '120+ DPD', 'Paid Off'],
                    datasets: [{
                        data: [345, 28, 11, 6, 3, 9, 8],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.85)', 'rgba(132, 204, 22, 0.85)',
                            'rgba(245, 158, 11, 0.85)', 'rgba(249, 115, 22, 0.85)',
                            'rgba(239, 68, 68, 0.85)', 'rgba(220, 38, 38, 0.85)',
                            'rgba(100, 116, 139, 0.85)'
                        ],
                        borderWidth: 0, hoverOffset: 6
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '58%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { ...tooltipStyle, callbacks: { label: (ctx) => { const pct = ((ctx.raw / 410) * 100).toFixed(1); return ctx.label + ': ' + ctx.raw + ' loans (' + pct + '%)'; } } }
                    }
                }
            });

            // Jan Vintage Chart
            const janVintLabels = ['Nov 24', 'Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Nov 25', 'Dec 25', 'Jan 26'];
            const janVintLoans = [25, 32, 49, 53, 64, 49, 85, 27, 6, 2, 4, 14];
            const janVintDQ30 = [16.0, 3.1, 6.1, 5.7, 10.9, 4.1, 5.9, 11.1, 0.0, 0.0, 0.0, 0.0];

            new Chart(document.getElementById('janVintageChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: janVintLabels,
                    datasets: [
                        {
                            label: 'Loan Count', data: janVintLoans,
                            backgroundColor: 'rgba(96, 165, 250, 0.75)', borderRadius: 4, yAxisID: 'y',
                        },
                        {
                            label: 'DQ30+ Rate', data: janVintDQ30, type: 'line',
                            borderColor: '#F59E0B', backgroundColor: 'transparent',
                            tension: 0.4, borderWidth: 2.5,
                            pointRadius: 4, pointBackgroundColor: '#F59E0B',
                            yAxisID: 'y1',
                        }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    interaction: { intersect: false, mode: 'index' },
                    plugins: {
                        legend: { display: false },
                        tooltip: { ...tooltipStyle, callbacks: { label: (ctx) => { if (ctx.dataset.label === 'Loan Count') return 'Originations: ' + ctx.raw + ' loans'; return 'DQ30+ Rate: ' + ctx.raw.toFixed(1) + '%'; } } }
                    },
                    scales: {
                        x: { grid: { color: 'rgba(148,163,184,0.08)' }, ticks: { font: { size: 8 } } },
                        y: { position: 'left', grid: { color: 'rgba(148,163,184,0.08)' }, ticks: { font: { size: 8 } }, min: 0, max: 100 },
                        y1: { position: 'right', grid: { display: false }, ticks: { callback: (v) => v + '%', font: { size: 8 } }, min: 0, max: 25 }
                    }
                }
            });
        }

        // ============================================================
        // Section Sub-Navigation (Feb only)
        // ============================================================
        function showFebSection(section) {
            // Update active nav button
            document.querySelectorAll('#feb-section-nav .section-nav-btn').forEach(b => b.classList.remove('active'));
            const btns = document.querySelectorAll('#feb-section-nav .section-nav-btn');
            const map = { 'all': 0, 'trends': 1, 'segmentation': 2, 'performance': 3, 'intelligence': 4 };
            if (btns[map[section]]) btns[map[section]].classList.add('active');

            // Show/hide sections
            document.querySelectorAll('#feb-content .feb-section').forEach(el => {
                if (section === 'all' || el.getAttribute('data-section') === section) {
                    el.classList.remove('section-hidden');
                    el.classList.add('section-entering');
                    setTimeout(() => el.classList.remove('section-entering'), 700);
                } else {
                    el.classList.add('section-hidden');
                    el.classList.remove('section-entering');
                }
            });

            // Scroll to top of content area
            const nav = document.getElementById('feb-section-nav');
            if (nav) {
                const navRect = nav.getBoundingClientRect();
                if (navRect.top < 0) {
                    nav.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        }

        // ============================================================
        // Scroll-to-Top Button
        // ============================================================
        window.addEventListener('scroll', function() {
            const btn = document.getElementById('scrollTopBtn');
            if (window.scrollY > 400) {
                btn.classList.add('visible');
            } else {
                btn.classList.remove('visible');
            }
        });

        // ============================================================
        // Period Toggle — full 3-way container swap
        // ============================================================
        function togglePeriod(period) {
            document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
            const cmpLink = document.getElementById('compareLinkBtn');
            if (cmpLink) cmpLink.classList.remove('active');

            const febEl = document.getElementById('feb-content');
            const janEl = document.getElementById('jan-content');
            const cmpEl = document.getElementById('compare-content');
            const secNav = document.getElementById('feb-section-nav');
            const btns = document.querySelectorAll('.period-btn');

            // Hide all
            febEl.style.display = 'none';
            janEl.style.display = 'none';
            cmpEl.style.display = 'none';
            if (secNav) secNav.style.display = 'none';

            if (period === 'jan') {
                btns[0].classList.add('active');
                janEl.style.display = 'block';
                document.getElementById('hdr-badge').textContent = 'JAN 2026 EOM';
                document.getElementById('hdr-subtitle').innerHTML = 'PorchPass Manufactured Housing Finance \u2022 Delinquency & Portfolio Analytics \u2022 As of January 31, 2026';
                document.getElementById('hdr-date').innerHTML = 'Report Date: <strong>January 31, 2026</strong>';
                document.getElementById('hdr-denom').textContent = 'All rates = Count / 410 Total Loans';
                initJanCharts();
            } else if (period === 'compare') {
                if (cmpLink) cmpLink.classList.add('active');
                cmpEl.style.display = 'block';
                document.getElementById('hdr-badge').textContent = 'JAN vs FEB';
                document.getElementById('hdr-subtitle').innerHTML = 'PorchPass Manufactured Housing Finance \u2022 Period-over-Period Comparison \u2022 January EOM \u2192 February MTD';
                document.getElementById('hdr-date').innerHTML = 'Comparison: <strong>Jan 31 \u2192 Feb 15, 2026</strong>';
                document.getElementById('hdr-denom').textContent = 'Jan = 410 loans | Feb = 413 loans';
                initCompareCharts();
                // Animate comparison cards entrance
                const cmpCards = cmpEl.querySelectorAll('.compare-kpi-card, .compare-chart-card, .compare-bucket-card, .compare-summary-card');
                cmpCards.forEach((c, i) => {
                    c.style.opacity = '0'; c.style.transform = 'translateY(16px)';
                    setTimeout(() => {
                        c.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                        c.style.opacity = '1'; c.style.transform = 'translateY(0)';
                    }, 60 * i);
                });
            } else {
                btns[1].classList.add('active');
                febEl.style.display = 'block';
                if (secNav) secNav.style.display = '';
                document.getElementById('hdr-badge').textContent = 'FEB 2026 MTD';
                document.getElementById('hdr-subtitle').innerHTML = 'PorchPass Manufactured Housing Finance \u2022 Delinquency & Portfolio Analytics \u2022 As of February 15, 2026';
                document.getElementById('hdr-date').innerHTML = 'Report Date: <strong>February 15, 2026</strong>';
                document.getElementById('hdr-denom').textContent = 'All rates = Count / 413 Total Loans';
                animateKPICounters();
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        // ================================================================
        // FEATURE #2: Animated KPI Counters
        // ================================================================
        function animateKPICounters() {
            const kpiValues = document.querySelectorAll('#feb-content .kpi-strip .kpi-value[data-target]');
            kpiValues.forEach((el, i) => {
                const target = parseFloat(el.getAttribute('data-target'));
                const suffix = el.getAttribute('data-suffix') || '';
                const decimals = parseInt(el.getAttribute('data-decimals') || '0');
                const originalColor = el.style.color;
                const duration = 1200;
                const delay = i * 120;

                el.textContent = decimals > 0 ? '0.00' + suffix : '0' + suffix;

                setTimeout(() => {
                    const start = performance.now();
                    function step(now) {
                        const elapsed = now - start;
                        const progress = Math.min(elapsed / duration, 1);
                        const eased = 1 - Math.pow(1 - progress, 3);
                        const current = target * eased;
                        el.textContent = current.toFixed(decimals) + suffix;
                        if (progress < 1) {
                            requestAnimationFrame(step);
                        } else {
                            el.textContent = target.toFixed(decimals) + suffix;
                            el.classList.add('counted');
                            setTimeout(() => el.classList.remove('counted'), 300);
                        }
                    }
                    requestAnimationFrame(step);
                }, delay);
            });
        }
        // Fire on load
        animateKPICounters();

        // ================================================================
        // FEATURE #5: KPI Sparklines — Now rendered as inline SVG (no JS needed)
        // ================================================================

        // ================================================================
        // FEATURE #3: Export PDF
        // ================================================================
        function exportPDF() {
            const toast = document.getElementById('exportToast');
            toast.classList.add('visible');
            setTimeout(() => { window.print(); }, 300);
            setTimeout(() => { toast.classList.remove('visible'); }, 4000);
        }

        // ================================================================
        // FEATURE #6: Light/Dark Theme Toggle
        // ================================================================
        let isDarkTheme = true;
        const allChartInstances = [];

        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            document.body.classList.toggle('light-theme', !isDarkTheme);
            const btn = document.getElementById('themeToggleBtn');
            btn.textContent = isDarkTheme ? '\u2600' : '\u263D';

            // Update Chart.js defaults for PorchPass brand
            const textColor = isDarkTheme ? '#94A3B8' : '#697083';
            const gridColor = isDarkTheme ? 'rgba(148,163,184,0.08)' : 'rgba(64,117,255,0.06)';
            const fontFamily = isDarkTheme ? "'DM Sans', sans-serif" : "'Figtree', 'DM Sans', sans-serif";
            Chart.defaults.color = textColor;
            Chart.defaults.font.family = fontFamily;

            // Update all existing chart instances
            Chart.helpers.each(Chart.instances, (chart) => {
                if (!chart) return;
                chart.options.font = { family: fontFamily };
                if (chart.options && chart.options.scales) {
                    Object.values(chart.options.scales).forEach(scale => {
                        if (scale.grid) scale.grid.color = gridColor;
                        if (scale.ticks) { scale.ticks.color = textColor; scale.ticks.font = { family: fontFamily }; }
                    });
                }
                if (chart.options && chart.options.plugins && chart.options.plugins.tooltip) {
                    chart.options.plugins.tooltip.backgroundColor = isDarkTheme ? 'rgba(30,41,59,0.95)' : '#111827';
                    chart.options.plugins.tooltip.titleColor = isDarkTheme ? '#F8FAFC' : '#FFFFFF';
                    chart.options.plugins.tooltip.bodyColor = isDarkTheme ? '#CBD5E1' : '#C4C9CF';
                    chart.options.plugins.tooltip.borderColor = isDarkTheme ? '#475569' : 'rgba(64,117,255,0.3)';
                    chart.options.plugins.tooltip.titleFont = { family: fontFamily, weight: '600' };
                    chart.options.plugins.tooltip.bodyFont = { family: fontFamily };
                }
                if (chart.options && chart.options.plugins && chart.options.plugins.legend) {
                    chart.options.plugins.legend.labels = chart.options.plugins.legend.labels || {};
                    chart.options.plugins.legend.labels.color = textColor;
                    chart.options.plugins.legend.labels.font = { family: fontFamily };
                }
                chart.update('none');
            });
        }

        // ================================================================
        // FEATURE #7: Card Expand / Focus Mode
        // ================================================================

        // ---- FULL DATASETS for expanded Risk Segmentation tables ----
        const expandedTableData = {
            'credit-tier': {
                title: 'PORTFOLIO — BY CREDIT SCORE TIER (Full Detail)',
                headers: ['Tier','Loan Count','% of Loans','UPB ($)','% of UPB','Avg Loan Amt','Note Rate','Net SFee','WAC Rate','Avg FICO','Avg LTV','Avg DTI','P&I','T&I','% Esc (of UPB)','%Del30','%Del60','%Del90','%D120+'],
                rows: [
                    {v:['Tier 1 (681+)',329,0.8266,43097476.78,0.8465,130995.37,8.507,0.30,0.08507,735,0.8313,0.3675,353743.17,90523.36,0.0021,0.0295,0.0270,0.0193,0.0193],total:false},
                    {v:['Tier 2 (641-680)',69,0.1734,8105364.19,0.1592,117469.05,9.796,0.30,0.09796,659,0.8158,0.3655,73279.19,17954.29,0.0022,0.0994,0.0892,0.0277,0.0277],total:false},
                    {v:['Tier 3 (600-640)',7,0.0176,637507.99,0.0125,91072.57,10.845,0.30,0.10845,613,0.7757,0.3329,6340.56,1391.46,0.0022,0.1508,0.1508,0.1508,0.1508],total:false},
                    {v:['TOTAL',405,1.0176,51840348.96,1.0183,128000.86,8.737,0.30,0.08737,722,0.8282,0.3667,353743.17,109869.11,0.0021,0.0419,0.0382,0.0223,0.0223],total:true}
                ],
                // Column format: $=dollar, %=percent, #=integer, f=float1, f2=float2, r=rate%, s=string
                formats: ['s','#','%','$','%','$','r','f2','f4','#','%','%','$','$','%4','%','%','%','%']
            },
            'land-type': {
                title: 'PORTFOLIO — BY LAND TYPE (Full Detail)',
                headers: ['Land Type','Loan Count','% of Loans','UPB ($)','% of UPB','Avg Loan Amt','Note Rate','WAC Rate','WALA','Orig Term','Rem Term','P&I','T&I','% Esc (of UPB)','%Del30','%Del60','%Del90','%D120+'],
                rows: [
                    {v:['Customer Owned',151,0.3794,20110510.49,0.3950,133182.19,8.675,0.08675,11.97,299.2,292.07,167350.46,42041.29,0.0021,0.0400,0.0359,0.0174,0.0174],total:false},
                    {v:['Private Not Owned',223,0.5603,28114582.72,0.5522,126074.36,8.784,0.08784,11.24,298.9,291.48,235079.71,59362.28,0.0021,0.0454,0.0415,0.0286,0.0286],total:false},
                    {v:['Family Land',1,0.0025,157983.89,0.0031,157983.89,8.380,0.08380,14.27,300,290.73,1275.09,197.12,0.0012,0,0,0,0],total:false},
                    {v:['Community',16,0.0402,1733890.62,0.0341,108368.16,9.373,0.09373,10.23,300,294.10,15127.50,4277.18,0.0025,0.0536,0.0536,0,0],total:false},
                    {v:['TOTAL',391,0.9824,50116967.72,0.9844,131402.15,8.737,0.08737,11.18,300,290.15,235079.71,109869.11,0.0022,0.0434,0.0395,0.0230,0.0230],total:true}
                ],
                formats: ['s','#','%','$','%','$','r','f4','f1','f1','f1','$','$','%4','%','%','%','%']
            },
            'note-rate': {
                title: 'PORTFOLIO — BY NOTE RATE BANDS (Full Detail)',
                headers: ['Rate Band','Loan Count','% of Loans','UPB ($)','% of UPB','Avg Loan Amt','Note Rate','Net SFee','WALA','Orig Term','Rem Term','P&I','T&I','% Esc (of UPB)','%Del30','%Del60','%Del90','%D120+'],
                rows: [
                    {v:['< 8.00%',20,0.0503,2662441.04,0.0523,133122.05,7.988,0.30,13.35,294,286.76,21189.62,4105.87,0.0015,0,0,0,0],total:false},
                    {v:['8.00% \u2013 8.49%',131,0.3291,17752661.80,0.3487,135516.50,8.360,0.30,10.63,294.3,287.07,151219.54,37722.85,0.0021,0.0149,0.0086,0.0086,0.0086],total:false},
                    {v:['8.50% \u2013 8.99%',162,0.4070,20950513.19,0.4115,129324.16,8.650,0.30,11.09,298.2,292.17,174139.72,46325.42,0.0022,0.0433,0.0433,0.0325,0.0325],total:false},
                    {v:['9.00% \u2013 9.99%',57,0.1432,6548559.68,0.1286,114887.01,9.659,0.30,12.04,300,292.49,58537.08,13801.55,0.0021,0.0601,0.0601,0.0162,0.0162],total:false},
                    {v:['\u2265 10.00%',28,0.0704,2996816.02,0.0589,107029.14,10.342,0.30,11.45,300,293.03,28276.96,7913.42,0.0026,0.2033,0.1758,0.0716,0.0716],total:false}
                ],
                formats: ['s','#','%','$','%','$','r','f2','f1','f1','f1','$','$','%4','%','%','%','%']
            }
        };

        function fmtExpandedCell(val, fmt) {
            if (val === 0 && (fmt === '%' || fmt === '%4')) return '0.0%';
            if (val === null || val === undefined || val === '') return '\u2014';
            switch(fmt) {
                case 's': return val;
                case '#': return Number(val).toLocaleString('en-US');
                case '$': return '$' + Number(val).toLocaleString('en-US', {minimumFractionDigits:0, maximumFractionDigits:0});
                case '%': return (Number(val)*100).toFixed(1) + '%';
                case '%4': return (Number(val)*100).toFixed(2) + '%';
                case 'r': return Number(val).toFixed(2) + '%';
                case 'f1': return Number(val).toFixed(1);
                case 'f2': return Number(val).toFixed(2);
                case 'f4': return Number(val).toFixed(4);
                default: return val;
            }
        }

        function buildExpandedTable(tableKey, originalCard) {
            const data = expandedTableData[tableKey];
            if (!data) return null;

            // Clone the card header (icon + title)
            const origHeader = originalCard.querySelector('.section-header');
            const headerClone = origHeader ? origHeader.cloneNode(true) : null;

            // Build container
            const wrap = document.createElement('div');
            wrap.className = 'card';
            wrap.style.cssText = 'padding: 16px; max-width: 100%; overflow: hidden;';

            if (headerClone) wrap.appendChild(headerClone);

            // Subtitle
            const subtitle = document.createElement('div');
            subtitle.className = 'expanded-detail-title';
            subtitle.textContent = data.title;
            wrap.appendChild(subtitle);

            // Scrollable table wrapper
            const scrollWrap = document.createElement('div');
            scrollWrap.className = 'expanded-detail-wrap';

            const table = document.createElement('table');
            table.className = 'tier-table';

            // Header row
            const thead = document.createElement('tr');
            data.headers.forEach(h => {
                const th = document.createElement('th');
                th.textContent = h;
                thead.appendChild(th);
            });
            table.appendChild(thead);

            // Data rows
            data.rows.forEach(row => {
                const tr = document.createElement('tr');
                if (row.total) tr.className = 'total-row';
                row.v.forEach((cell, ci) => {
                    const td = document.createElement('td');
                    const fmt = data.formats[ci] || 's';
                    const formatted = fmtExpandedCell(cell, fmt);
                    td.textContent = formatted;

                    // First column bold
                    if (ci === 0) td.innerHTML = '<strong>' + formatted + '</strong>';

                    // Color-code DQ columns (last 4 cols: %Del30, %Del60, %Del90, %D120+)
                    const hLen = data.headers.length;
                    if (ci >= hLen - 4 && typeof cell === 'number') {
                        if (cell === 0) { td.className = 'highlight-cell'; }
                        else if (cell <= 0.03) { td.className = 'highlight-cell'; }
                        else if (cell <= 0.06) { td.className = 'warning-cell'; }
                        else { td.className = 'danger-cell'; }
                    }

                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });

            scrollWrap.appendChild(table);
            wrap.appendChild(scrollWrap);

            // Clone the callout if the original card has one
            const origCallout = originalCard.querySelector('.callout');
            if (origCallout) {
                wrap.appendChild(origCallout.cloneNode(true));
            }

            return wrap;
        }

        // Inject expand buttons into all cards
        document.querySelectorAll('.card').forEach((card, idx) => {
            const btn = document.createElement('button');
            btn.className = 'card-expand-btn';
            btn.innerHTML = '\u26F6';
            btn.title = 'Expand card';
            btn.onclick = function(e) {
                e.stopPropagation();
                openModal(card);
            };
            card.appendChild(btn);
        });

        let modalOriginalCard = null;
        let modalPlaceholder = null;

        function openModal(card) {
            const modal = document.getElementById('cardModal');
            const body = document.getElementById('modalBody');

            // Check if this is one of the 3 expandable risk segmentation tables
            const expandTableKey = card.getAttribute('data-expand-table');
            if (expandTableKey && expandedTableData[expandTableKey]) {
                // EXPANDED TABLE PATH: Build full-detail table for modal
                modalOriginalCard = null;
                modalPlaceholder = null;
                const expandedContent = buildExpandedTable(expandTableKey, card);
                body.innerHTML = '';
                if (expandedContent) body.appendChild(expandedContent);
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                return;
            }

            // Check if this card contains a Chart.js canvas
            const hasChart = card.querySelector('canvas[id$="Chart"]');

            if (hasChart) {
                // LIVE CHART PATH: Move the actual card into the modal
                // Create a placeholder to remember where the card was
                modalPlaceholder = document.createElement('div');
                modalPlaceholder.style.display = 'none';
                modalPlaceholder.className = 'modal-placeholder';
                card.parentNode.insertBefore(modalPlaceholder, card);

                // Store reference to original card
                modalOriginalCard = card;

                // Hide expand button and annotations
                card.querySelectorAll('.card-expand-btn, .chart-annotations').forEach(el => el.style.display = 'none');

                // Expand the chart container height for modal view
                card.querySelectorAll('.chart-140').forEach(el => {
                    el.setAttribute('data-orig-height', el.style.height || '');
                    el.style.height = '420px';
                });

                // Move card into modal body
                body.innerHTML = '';
                body.appendChild(card);

                // Trigger Chart.js resize so it fills the larger container
                setTimeout(() => {
                    Chart.helpers.each(Chart.instances, (chart) => {
                        if (chart && card.contains(chart.canvas)) {
                            chart.resize();
                        }
                    });
                }, 50);
            } else {
                // NON-CHART PATH: Clone for static content (tables, text, etc.)
                modalOriginalCard = null;
                modalPlaceholder = null;
                const clone = card.cloneNode(true);
                clone.querySelectorAll('.card-expand-btn, .kpi-sparkline-wrap, .chart-annotations').forEach(el => el.remove());
                body.innerHTML = '';
                body.appendChild(clone);
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('cardModal');
            if (!modal.classList.contains('active')) return;

            // Add closing animation
            modal.classList.add('closing');

            // After animation completes, do cleanup
            setTimeout(() => {
                if (modalOriginalCard && modalPlaceholder) {
                    // LIVE CHART PATH: Move card back to its original position
                    const card = modalOriginalCard;

                    // Restore chart container heights
                    card.querySelectorAll('.chart-140').forEach(el => {
                        const orig = el.getAttribute('data-orig-height') || '';
                        el.style.height = orig;
                    });

                    // Re-show expand button and annotations
                    card.querySelectorAll('.card-expand-btn, .chart-annotations').forEach(el => el.style.display = '');

                    // Move card back to its original position
                    modalPlaceholder.parentNode.insertBefore(card, modalPlaceholder);
                    modalPlaceholder.remove();

                    // Trigger Chart.js resize back to original size
                    setTimeout(() => {
                        Chart.helpers.each(Chart.instances, (chart) => {
                            if (chart && card.contains(chart.canvas)) {
                                chart.resize();
                            }
                        });
                    }, 50);

                    modalOriginalCard = null;
                    modalPlaceholder = null;
                }

                document.getElementById('modalBody').innerHTML = '';
                modal.classList.remove('active', 'closing');
                document.body.style.overflow = '';
            }, 200); // Match CSS animation duration
        }

        // Close on overlay click or Escape
        document.getElementById('cardModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });

        // ================================================================
        // FEATURE #4: Comparison Charts (lazy init)
        // ================================================================
        let compareChartsInitialized = false;

        function initCompareCharts() {
            if (compareChartsInitialized) return;
            compareChartsInitialized = true;

            const dpdColors = [
                'rgba(16,185,129,0.85)', 'rgba(132,204,22,0.85)',
                'rgba(245,158,11,0.85)', 'rgba(249,115,22,0.85)',
                'rgba(239,68,68,0.85)', 'rgba(220,38,38,0.85)',
                'rgba(100,116,139,0.85)'
            ];
            const dpdLabels = ['Current', '1-29', '30-59', '60-89', '90-119', '120+', 'Paid Off'];

            // Jan Doughnut
            new Chart(document.getElementById('compareDpdJan').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: dpdLabels,
                    datasets: [{ data: [345, 28, 11, 6, 3, 9, 8], backgroundColor: dpdColors, borderWidth: 0 }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '55%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { ...tooltipStyle, callbacks: { label: (ctx) => ctx.label + ': ' + ctx.raw + ' loans (' + ((ctx.raw/410)*100).toFixed(1) + '%)' } }
                    }
                }
            });

            // Feb Doughnut
            new Chart(document.getElementById('compareDpdFeb').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: dpdLabels,
                    datasets: [{ data: [352, 34, 2, 8, 0, 9, 8], backgroundColor: dpdColors, borderWidth: 0 }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, cutout: '55%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { ...tooltipStyle, callbacks: { label: (ctx) => ctx.label + ': ' + ctx.raw + ' loans (' + ((ctx.raw/413)*100).toFixed(1) + '%)' } }
                    }
                }
            });
        }

        // ================================================================
        // FEATURE #5b: Body-level Sparkline Floating Tooltip
        // Escapes all CSS stacking contexts by living at <body> level
        // ================================================================
        (function() {
            const float = document.getElementById('sparkFloat');
            const kpiCards = document.querySelectorAll('.kpi-card');
            
            kpiCards.forEach(card => {
                const wrap = card.querySelector('.kpi-sparkline-wrap');
                if (!wrap) return;
                
                card.addEventListener('mouseenter', function() {
                    // Clone sparkline content into float
                    float.innerHTML = wrap.innerHTML;
                    float.classList.add('visible');
                    
                    // Position below the card, centered — with viewport boundary guards
                    const rect = card.getBoundingClientRect();
                    // Force reflow so offsetWidth/Height reflect new content
                    const floatW = float.offsetWidth;
                    const floatH = float.offsetHeight;
                    // Horizontal: center under card, clamp to viewport edges
                    let left = rect.left + rect.width / 2 - floatW / 2;
                    left = Math.max(8, Math.min(left, window.innerWidth - floatW - 8));
                    // Vertical: prefer below card; flip above if it would clip bottom
                    let top;
                    if (rect.bottom + 6 + floatH > window.innerHeight - 8) {
                        top = rect.top - floatH - 6;  // flip above
                    } else {
                        top = rect.bottom + 6;         // normal below
                    }
                    float.style.left = left + 'px';
                    float.style.top = top + 'px';
                });
                
                card.addEventListener('mouseleave', function() {
                    float.classList.remove('visible');
                });
            });
        })();

    </script>
</body>
</html>
